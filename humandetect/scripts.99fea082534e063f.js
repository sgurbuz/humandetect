var Aa=Object.defineProperty,La=Object.defineProperties,ja=Object.getOwnPropertyDescriptors,Nt=Object.getOwnPropertySymbols,Ma=Object.prototype.hasOwnProperty,Fa=Object.prototype.propertyIsEnumerable,zt=(he,ne,ge)=>ne in he?Aa(he,ne,{enumerable:!0,configurable:!0,writable:!0,value:ge}):he[ne]=ge,Wt=(he,ne)=>{for(var ge in ne||(ne={}))Ma.call(ne,ge)&&zt(he,ge,ne[ge]);if(Nt)for(var ge of Nt(ne))Fa.call(ne,ge)&&zt(he,ge,ne[ge]);return he},Gt=(he,ne)=>La(he,ja(ne)),$e=(he,ne,ge)=>new Promise((Re,Ve)=>{var Ze=Ee=>{try{Ue(ge.next(Ee))}catch(Ie){Ve(Ie)}},pe=Ee=>{try{Ue(ge.throw(Ee))}catch(Ie){Ve(Ie)}},Ue=Ee=>Ee.done?Re(Ee.value):Promise.resolve(Ee.value).then(Ze,pe);Ue((ge=ge.apply(he,ne)).next())});!function(he,ne){"object"==typeof exports&&"undefined"!=typeof module?module.exports=ne():"function"==typeof define&&define.amd?define(ne):(he="undefined"!=typeof globalThis?globalThis:he||self).Handsfree=ne()}(this,function(){"use strict";class he{constructor(e,i){var n=arguments;this.handsfree=e,this.config=i,this.data={},this.dependenciesLoaded=!1,this.enabled=i.enabled,this.plugins=[],this.gestures=[],this.gestureEstimator=null,setTimeout(()=>{const l=this.getData;this.getData=()=>$e(this,null,function*(){let c=(yield l.apply(this,n))||{};return c.gesture=this.getGesture(),this.runPlugins(),c});let h=this.getGesture;this.getGesture=()=>(h||(h=function(){}),h.apply(this,arguments))},0)}loadDependencies(){}updateData(){}updateGestureEstimator(){}enable(e=!0){this.handsfree.config[this.name]=this.config,this.handsfree.config[this.name].enabled=this.enabled=!0,document.body.classList.add(`handsfree-model-${this.name}`),e&&!this.dependenciesLoaded&&this.loadDependencies(),"weboji"===this.name&&(this.handsfree.debug.$canvas.weboji.style.display="block")}disable(){this.handsfree.config[this.name]=this.config,this.handsfree.config[this.name].enabled=this.enabled=!1,document.body.classList.remove(`handsfree-model-${this.name}`),setTimeout(()=>{var e;"weboji"===this.name?this.handsfree.debug.$canvas.weboji.style.display="none":(null===(e=this.handsfree.debug.context[this.name])||void 0===e?void 0:e.clearRect)&&this.handsfree.debug.context[this.name].clearRect(0,0,this.handsfree.debug.$canvas[this.name].width,this.handsfree.debug.$canvas[this.name].height),Object.keys(this.handsfree.model).some(n=>this.handsfree.model[n].enabled)||this.handsfree.stop()},0)}loadDependency(e,i,n=!1){if(n)return void(i&&i());const l=document.createElement("script");l.async=!0,l.onload=()=>{i&&i()},l.onerror=()=>{this.handsfree.emit("modelError",`Error loading ${e}`)},l.src=e,document.body.appendChild(l)}runPlugins(){!this.data||"handpose"===this.name&&!this.data.annotations||Object.keys(this.data).length&&this.plugins.forEach(e=>{var i;this.handsfree.plugin[e].enabled&&(null===(i=this.handsfree.plugin[e])||void 0===i||i.onFrame(this.handsfree.data))})}}var ne="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ge(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Re(t,e,i){return t(i={path:e,exports:{},require:function(n,l){return function Ve(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},i.exports),i.exports}var Ze=Re(function(t,e){"undefined"!=typeof self&&self,t.exports=function(i){var n={};function l(h){if(n[h])return n[h].exports;var c=n[h]={i:h,l:!1,exports:{}};return i[h].call(c.exports,c,c.exports,l),c.l=!0,c.exports}return l.m=i,l.c=n,l.d=function(h,c,g){l.o(h,c)||Object.defineProperty(h,c,{enumerable:!0,get:g})},l.r=function(h){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},l.t=function(h,c){if(1&c&&(h=l(h)),8&c||4&c&&"object"==typeof h&&h&&h.__esModule)return h;var g=Object.create(null);if(l.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:h}),2&c&&"string"!=typeof h)for(var E in h)l.d(g,E,function(C){return h[C]}.bind(null,E));return g},l.n=function(h){var c=h&&h.__esModule?function(){return h.default}:function(){return h};return l.d(c,"a",c),c},l.o=function(h,c){return Object.prototype.hasOwnProperty.call(h,c)},l.p="",l(l.s=0)}([function(i,n,l){l.r(n);var h={};function c(y){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(y)}l.r(h),l.d(h,"VictoryGesture",function(){return re}),l.d(h,"ThumbsUpGesture",function(){return Te});var g={Thumb:0,Index:1,Middle:2,Ring:3,Pinky:4,all:[0,1,2,3,4],nameMapping:{0:"Thumb",1:"Index",2:"Middle",3:"Ring",4:"Pinky"},pointsMapping:{0:[[0,1],[1,2],[2,3],[3,4]],1:[[0,5],[5,6],[6,7],[7,8]],2:[[0,9],[9,10],[10,11],[11,12]],3:[[0,13],[13,14],[14,15],[15,16]],4:[[0,17],[17,18],[18,19],[19,20]]},getName:function(y){return void 0!==c(this.nameMapping[y])&&this.nameMapping[y]},getPoints:function(y){return void 0!==c(this.pointsMapping[y])&&this.pointsMapping[y]}},E={NoCurl:0,HalfCurl:1,FullCurl:2,nameMapping:{0:"No Curl",1:"Half Curl",2:"Full Curl"},getName:function(y){return void 0!==c(this.nameMapping[y])&&this.nameMapping[y]}},C={VerticalUp:0,VerticalDown:1,HorizontalLeft:2,HorizontalRight:3,DiagonalUpRight:4,DiagonalUpLeft:5,DiagonalDownRight:6,DiagonalDownLeft:7,nameMapping:{0:"Vertical Up",1:"Vertical Down",2:"Horizontal Left",3:"Horizontal Right",4:"Diagonal Up Right",5:"Diagonal Up Left",6:"Diagonal Down Right",7:"Diagonal Down Left"},getName:function(y){return void 0!==c(this.nameMapping[y])&&this.nameMapping[y]}};function z(y){if("undefined"==typeof Symbol||null==y[Symbol.iterator]){if(Array.isArray(y)||(y=function(D,G){if(D){if("string"==typeof D)return Y(D,G);var N=Object.prototype.toString.call(D).slice(8,-1);if("Object"===N&&D.constructor&&(N=D.constructor.name),"Map"===N||"Set"===N)return Array.from(N);if("Arguments"===N||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return Y(D,G)}}(y))){var S=0,A=function(){};return{s:A,n:function(){return S>=y.length?{done:!0}:{done:!1,value:y[S++]}},e:function(D){throw D},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _,$,R=!0,I=!1;return{s:function(){_=y[Symbol.iterator]()},n:function(){var D=_.next();return R=D.done,D},e:function(D){I=!0,$=D},f:function(){try{R||null==_.return||_.return()}finally{if(I)throw $}}}}function Y(y,S){(null==S||S>y.length)&&(S=y.length);for(var A=0,_=new Array(S);A<S;A++)_[A]=y[A];return _}function v(y,S){var A=Object.keys(y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(y);S&&(_=_.filter(function($){return Object.getOwnPropertyDescriptor(y,$).enumerable})),A.push.apply(A,_)}return A}function d(y,S,A){return S in y?Object.defineProperty(y,S,{value:A,enumerable:!0,configurable:!0,writable:!0}):y[S]=A,y}var p=function(){function y(_){(function($,R){if(!($ instanceof R))throw new TypeError("Cannot call a class as a function")})(this,y),this.options=function($){for(var R=1;R<arguments.length;R++){var I=null!=arguments[R]?arguments[R]:{};R%2?v(Object(I),!0).forEach(function(D){d($,D,I[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(I)):v(Object(I)).forEach(function(D){Object.defineProperty($,D,Object.getOwnPropertyDescriptor(I,D))})}return $}({},{HALF_CURL_START_LIMIT:60,NO_CURL_START_LIMIT:130,DISTANCE_VOTE_POWER:1.1,SINGLE_ANGLE_VOTE_POWER:.9,TOTAL_ANGLE_VOTE_POWER:1.6},{},_)}var A;return(A=[{key:"estimate",value:function(_){var $,R=[],I=[],D=z(g.all);try{for(D.s();!($=D.n()).done;){var G,Q=g.getPoints($.value),fe=[],ie=[],ue=z(Q);try{for(ue.s();!(G=ue.n()).done;){var se=G.value,ae=this.getSlopes(_[se[0]],_[se[1]]),be=ae[1];fe.push(ae[0]),ie.push(be)}}catch(O){ue.e(O)}finally{ue.f()}R.push(fe),I.push(ie)}}catch(O){D.e(O)}finally{D.f()}var Pe,Se=[],ce=[],s=z(g.all);try{for(s.s();!(Pe=s.n()).done;){var a=Pe.value,o=a==g.Thumb?1:0,r=g.getPoints(a),u=_[r[o][0]],m=_[r[o+1][1]],w=_[r[3][1]],P=this.estimateFingerCurl(u,m,w),T=this.calculateFingerDirection(u,m,w,R[a].slice(o));Se[a]=P,ce[a]=T}}catch(O){s.e(O)}finally{s.f()}return{curls:Se,directions:ce}}},{key:"getSlopes",value:function(_,$){var R=this.calculateSlope(_[0],_[1],$[0],$[1]);return 2==_.length?R:[R,this.calculateSlope(_[1],_[2],$[1],$[2])]}},{key:"angleOrientationAt",value:function(_){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,R=0,I=0,D=0;return _>=75&&_<=105?R=1*$:_>=25&&_<=155?I=1*$:D=1*$,[R,I,D]}},{key:"estimateFingerCurl",value:function(_,$,R){var I=_[0]-$[0],D=_[0]-R[0],G=$[0]-R[0],N=_[1]-$[1],Q=_[1]-R[1],fe=$[1]-R[1],ie=_[2]-$[2],ue=_[2]-R[2],se=$[2]-R[2],J=Math.sqrt(I*I+N*N+ie*ie),ve=Math.sqrt(D*D+Q*Q+ue*ue),ae=Math.sqrt(G*G+fe*fe+se*se),de=(ae*ae+J*J-ve*ve)/(2*ae*J);de>1?de=1:de<-1&&(de=-1);var be=Math.acos(de);return(be=57.2958*be%180)>this.options.NO_CURL_START_LIMIT?E.NoCurl:be>this.options.HALF_CURL_START_LIMIT?E.HalfCurl:E.FullCurl}},{key:"estimateHorizontalDirection",value:function(_,$,R,I){return I==Math.abs(_)?_>0?C.HorizontalLeft:C.HorizontalRight:I==Math.abs($)?$>0?C.HorizontalLeft:C.HorizontalRight:R>0?C.HorizontalLeft:C.HorizontalRight}},{key:"estimateVerticalDirection",value:function(_,$,R,I){return I==Math.abs(_)?_<0?C.VerticalDown:C.VerticalUp:I==Math.abs($)?$<0?C.VerticalDown:C.VerticalUp:R<0?C.VerticalDown:C.VerticalUp}},{key:"estimateDiagonalDirection",value:function(_,$,R,I,D,G,N,Q){var fe=this.estimateVerticalDirection(_,$,R,I),ie=this.estimateHorizontalDirection(D,G,N,Q);return fe==C.VerticalUp?ie==C.HorizontalLeft?C.DiagonalUpLeft:C.DiagonalUpRight:ie==C.HorizontalLeft?C.DiagonalDownLeft:C.DiagonalDownRight}},{key:"calculateFingerDirection",value:function(_,$,R,I){var D=_[0]-$[0],G=_[0]-R[0],N=$[0]-R[0],Q=_[1]-$[1],fe=_[1]-R[1],ie=$[1]-R[1],ue=Math.max(Math.abs(D),Math.abs(G),Math.abs(N)),se=Math.max(Math.abs(Q),Math.abs(fe),Math.abs(ie)),J=0,ve=0,ae=0,de=se/(ue+1e-5);de>1.5?J+=this.options.DISTANCE_VOTE_POWER:de>.66?ve+=this.options.DISTANCE_VOTE_POWER:ae+=this.options.DISTANCE_VOTE_POWER;var be=Math.sqrt(D*D+Q*Q),Pe=Math.sqrt(G*G+fe*fe),Se=Math.sqrt(N*N+ie*ie),ce=Math.max(be,Pe,Se),s=_[0],a=_[1],o=R[0],r=R[1];ce==be?(o=R[0],r=R[1]):ce==Se&&(s=$[0],a=$[1]);var w=this.getSlopes([s,a],[o,r]),P=this.angleOrientationAt(w,this.options.TOTAL_ANGLE_VOTE_POWER);J+=P[0],ve+=P[1],ae+=P[2];var T,O=z(I);try{for(O.s();!(T=O.n()).done;){var M=this.angleOrientationAt(T.value,this.options.SINGLE_ANGLE_VOTE_POWER);J+=M[0],ve+=M[1],ae+=M[2]}}catch(Z){O.e(Z)}finally{O.f()}return J==Math.max(J,ve,ae)?this.estimateVerticalDirection(fe,Q,ie,se):ae==Math.max(ve,ae)?this.estimateHorizontalDirection(G,D,N,ue):this.estimateDiagonalDirection(fe,Q,ie,se,G,D,N,ue)}},{key:"calculateSlope",value:function(_,$,R,I){var G=180*Math.atan(($-I)/(_-R))/Math.PI;return G<=0?G=-G:G>0&&(G=180-G),G}}])&&function b(y,S){for(var A=0;A<S.length;A++){var _=S[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}(y.prototype,A),y}();function f(y){if("undefined"==typeof Symbol||null==y[Symbol.iterator]){if(Array.isArray(y)||(y=function(D,G){if(D){if("string"==typeof D)return k(D,G);var N=Object.prototype.toString.call(D).slice(8,-1);if("Object"===N&&D.constructor&&(N=D.constructor.name),"Map"===N||"Set"===N)return Array.from(N);if("Arguments"===N||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return k(D,G)}}(y))){var S=0,A=function(){};return{s:A,n:function(){return S>=y.length?{done:!0}:{done:!1,value:y[S++]}},e:function(D){throw D},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _,$,R=!0,I=!1;return{s:function(){_=y[Symbol.iterator]()},n:function(){var D=_.next();return R=D.done,D},e:function(D){I=!0,$=D},f:function(){try{R||null==_.return||_.return()}finally{if(I)throw $}}}}function k(y,S){(null==S||S>y.length)&&(S=y.length);for(var A=0,_=new Array(S);A<S;A++)_[A]=y[A];return _}function W(y,S){if(!(y instanceof S))throw new TypeError("Cannot call a class as a function")}var K=function(){function y(_){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};W(this,y),this.estimator=new p($),this.gestures=_}var A;return(A=[{key:"estimate",value:function(_,$){var R,I=[],D=this.estimator.estimate(_),G=[],N=f(g.all);try{for(N.s();!(R=N.n()).done;){var Q=R.value;G.push([g.getName(Q),E.getName(D.curls[Q]),C.getName(D.directions[Q])])}}catch(J){N.e(J)}finally{N.f()}var fe,ie=f(this.gestures);try{for(ie.s();!(fe=ie.n()).done;){var ue=fe.value,se=ue.matchAgainst(D.curls,D.directions);se>=$&&I.push({name:ue.name,confidence:se})}}catch(J){ie.e(J)}finally{ie.f()}return{poseData:G,gestures:I}}}])&&function B(y,S){for(var A=0;A<S.length;A++){var _=S[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}(y.prototype,A),y}();function F(y,S){return function(A){if(Array.isArray(A))return A}(y)||function(A,_){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(A)){var $=[],R=!0,I=!1,D=void 0;try{for(var G,N=A[Symbol.iterator]();!(R=(G=N.next()).done)&&($.push(G.value),!_||$.length!==_);R=!0);}catch(Q){I=!0,D=Q}finally{try{R||null==N.return||N.return()}finally{if(I)throw D}}return $}}(y,S)||te(y,S)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(y){if("undefined"==typeof Symbol||null==y[Symbol.iterator]){if(Array.isArray(y)||(y=te(y))){var S=0,A=function(){};return{s:A,n:function(){return S>=y.length?{done:!0}:{done:!1,value:y[S++]}},e:function(D){throw D},f:A}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var _,$,R=!0,I=!1;return{s:function(){_=y[Symbol.iterator]()},n:function(){var D=_.next();return R=D.done,D},e:function(D){I=!0,$=D},f:function(){try{R||null==_.return||_.return()}finally{if(I)throw $}}}}function te(y,S){if(y){if("string"==typeof y)return X(y,S);var A=Object.prototype.toString.call(y).slice(8,-1);return"Object"===A&&y.constructor&&(A=y.constructor.name),"Map"===A||"Set"===A?Array.from(A):"Arguments"===A||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?X(y,S):void 0}}function X(y,S){(null==S||S>y.length)&&(S=y.length);for(var A=0,_=new Array(S);A<S;A++)_[A]=y[A];return _}var q=function(){function y(_){(function($,R){if(!($ instanceof R))throw new TypeError("Cannot call a class as a function")})(this,y),this.name=_,this.curls={},this.directions={},this.weights=[1,1,1,1,1],this.weightsRelative=[1,1,1,1,1]}var A;return(A=[{key:"addCurl",value:function(_,$,R){void 0===this.curls[_]&&(this.curls[_]=[]),this.curls[_].push([$,R])}},{key:"addDirection",value:function(_,$,R){void 0===this.directions[_]&&(this.directions[_]=[]),this.directions[_].push([$,R])}},{key:"setWeight",value:function(_,$){this.weights[_]=$;var R=this.weights.reduce(function(I,D){return I+D},0);this.weightsRelative=this.weights.map(function(I){return 5*I/R})}},{key:"matchAgainst",value:function(_,$){var R=0;for(var I in _){var D=_[I],G=this.curls[I];if(void 0!==G){var N,Q=H(G);try{for(Q.s();!(N=Q.n()).done;){var fe=F(N.value,2);if(D==fe[0]){R+=fe[1]*this.weightsRelative[I];break}}}catch(ce){Q.e(ce)}finally{Q.f()}}else R+=this.weightsRelative[I]}for(var se in $){var J=$[se],ve=this.directions[se];if(void 0!==ve){var ae,de=H(ve);try{for(de.s();!(ae=de.n()).done;){var be=F(ae.value,2);if(J==be[0]){R+=be[1]*this.weightsRelative[se];break}}}catch(ce){de.e(ce)}finally{de.f()}}else R+=this.weightsRelative[se]}return R}}])&&function U(y,S){for(var A=0;A<S.length;A++){var _=S[A];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}(y.prototype,A),y}(),j=new q("victory");j.addCurl(g.Thumb,E.HalfCurl,.5),j.addCurl(g.Thumb,E.NoCurl,.5),j.addDirection(g.Thumb,C.VerticalUp,1),j.addDirection(g.Thumb,C.DiagonalUpLeft,1),j.addCurl(g.Index,E.NoCurl,1),j.addDirection(g.Index,C.VerticalUp,.75),j.addDirection(g.Index,C.DiagonalUpLeft,1),j.addCurl(g.Middle,E.NoCurl,1),j.addDirection(g.Middle,C.VerticalUp,1),j.addDirection(g.Middle,C.DiagonalUpLeft,.75),j.addCurl(g.Ring,E.FullCurl,1),j.addDirection(g.Ring,C.VerticalUp,.2),j.addDirection(g.Ring,C.DiagonalUpLeft,1),j.addDirection(g.Ring,C.HorizontalLeft,.2),j.addCurl(g.Pinky,E.FullCurl,1),j.addDirection(g.Pinky,C.VerticalUp,.2),j.addDirection(g.Pinky,C.DiagonalUpLeft,1),j.addDirection(g.Pinky,C.HorizontalLeft,.2),j.setWeight(g.Index,2),j.setWeight(g.Middle,2);var re=j,le=new q("thumbs_up");le.addCurl(g.Thumb,E.NoCurl,1),le.addDirection(g.Thumb,C.VerticalUp,1),le.addDirection(g.Thumb,C.DiagonalUpLeft,.25),le.addDirection(g.Thumb,C.DiagonalUpRight,.25);for(var _e=0,x=[g.Index,g.Middle,g.Ring,g.Pinky];_e<x.length;_e++){var ye=x[_e];le.addCurl(ye,E.FullCurl,1),le.addDirection(ye,C.HorizontalLeft,1),le.addDirection(ye,C.HorizontalRight,1)}var Te=le;n.default={GestureEstimator:K,GestureDescription:q,Finger:g,FingerCurl:E,FingerDirection:C,Gestures:h}}]).default}),pe=ge(Ze);class Ue extends he{constructor(e,i){super(e,i),this.name="hands",this.palmPoints=[0,5,9,13,17],this.gestureEstimator=new pe.GestureEstimator([])}loadDependencies(e){this.handsfree.config.isClient?this.loadDependency(`${this.handsfree.config.assetsPath}/@mediapipe/drawing_utils.js`,()=>{this.onWarmUp(e)},!!window.drawConnectors):this.loadDependency(`${this.handsfree.config.assetsPath}/@mediapipe/hands/hands.js`,()=>{this.api=new window.Hands({locateFile:i=>`${this.handsfree.config.assetsPath}/@mediapipe/hands/${i}`}),this.api.setOptions(this.handsfree.config.hands),this.api.onResults(i=>this.dataReceived(i)),this.handsfree.getUserMedia(()=>{this.handsfree.mediapipeWarmups.isWarmingUp?this.handsfree.on("mediapipeWarmedUp",()=>{!this.handsfree.mediapipeWarmups.isWarmingUp&&!this.handsfree.mediapipeWarmups[this.name]&&this.warmUp(e)}):this.warmUp(e)}),this.loadDependency(`${this.handsfree.config.assetsPath}/@mediapipe/drawing_utils.js`,null,!!window.drawConnectors)})}warmUp(e){this.handsfree.mediapipeWarmups[this.name]=!0,this.handsfree.mediapipeWarmups.isWarmingUp=!0,this.api.send({image:this.handsfree.debug.$video}).then(()=>{this.handsfree.mediapipeWarmups.isWarmingUp=!1,this.onWarmUp(e)})}onWarmUp(e){this.dependenciesLoaded=!0,document.body.classList.add("handsfree-model-hands"),this.handsfree.emit("modelReady",this),this.handsfree.emit("handsModelReady",this),this.handsfree.emit("mediapipeWarmedUp",this),e&&e(this)}getData(){return $e(this,null,function*(){return this.dependenciesLoaded&&(yield this.api.send({image:this.handsfree.debug.$video})),this.data})}dataReceived(e){e.multiHandLandmarks&&(e=this.getCenterOfPalm(e)),e=this.forceHandedness(e),this.data=e,this.handsfree.data.hands=e,this.handsfree.isDebugging&&this.debug(e)}forceHandedness(e){return e.landmarks=[[],[],[],[]],e.landmarksVisible=[!1,!1,!1,!1],e.multiHandLandmarks&&e.multiHandLandmarks.forEach((i,n)=>{let l;l=n<2?"Right"===e.multiHandedness[n].label?0:1:"Right"===e.multiHandedness[n].label?2:3,e.landmarks[l]=i,e.landmarksVisible[l]=!0}),e}getCenterOfPalm(e){return e.multiHandLandmarks.forEach((i,n)=>{let l=0,h=0;this.palmPoints.forEach(c=>{l+=i[c].x,h+=i[c].y}),l/=this.palmPoints.length,h/=this.palmPoints.length,e.multiHandLandmarks[n][21]={x:l,y:h}}),e}debug(e){if("undefined"!=typeof drawConnectors&&(this.handsfree.debug.context.hands.clearRect(0,0,this.handsfree.debug.$canvas.hands.width,this.handsfree.debug.$canvas.hands.height),e.multiHandLandmarks))for(const i of e.multiHandLandmarks)drawConnectors(this.handsfree.debug.context.hands,i,HAND_CONNECTIONS,{color:"#00FF00",lineWidth:5}),drawLandmarks(this.handsfree.debug.context.hands,i,{color:"#FF0000",lineWidth:2})}updateGestureEstimator(){const e=[],i=[];this.gestures.forEach(n=>{if(this.handsfree.gesture[n].enabled&&(e.push(n),!this.handsfree.gesture[n].compiledDescription&&this.handsfree.gesture[n].enabled)){const l=new pe.GestureDescription(n);this.handsfree.gesture[n].description.forEach(h=>{switch(h[0]){case"addCurl":l[h[0]](pe.Finger[h[1]],pe.FingerCurl[h[2]],h[3]);break;case"addDirection":l[h[0]](pe.Finger[h[1]],pe.FingerDirection[h[2]],h[3]);break;case"setWeight":l[h[0]](pe.Finger[h[1]],h[2])}}),this.handsfree.gesture[n].compiledDescription=l}}),e.forEach(n=>{i.push(this.handsfree.gesture[n].compiledDescription)}),e.length&&(this.gestureEstimator=new pe.GestureEstimator(i))}getGesture(){let e=[null,null,null,null];return this.data.landmarks.forEach((i,n)=>{if(this.data.landmarksVisible[n]){const l=[];for(let c=0;c<21;c++)l.push([i[c].x*window.outerWidth,i[c].y*window.outerHeight,0]);const h=this.gestureEstimator.estimate(l,7.5);e[n]=h.gestures.length?h.gestures.reduce((c,g)=>g.confidence>=this.handsfree.gesture[g.name].confidence&&g.confidence>c.confidence?g:c):{name:"",confidence:0},e[n].name&&e[n].confidence<this.handsfree.gesture[e[n].name].confidence&&(e[n]={name:"",confidence:0}),e[n].pose=h.poseData}}),e}}class Ee extends he{constructor(e,i){super(e,i),this.name="facemesh",this.isWarmedUp=!1}loadDependencies(e){this.handsfree.config.isClient?this.loadDependency(`${this.handsfree.config.assetsPath}/@mediapipe/drawing_utils.js`,()=>{this.onWarmUp(e)},!!window.drawConnectors):this.loadDependency(`${this.handsfree.config.assetsPath}/@mediapipe/face_mesh/face_mesh.js`,()=>{this.api=new window.FaceMesh({locateFile:i=>`${this.handsfree.config.assetsPath}/@mediapipe/face_mesh/${i}`}),this.api.setOptions(this.handsfree.config.facemesh),this.api.onResults(i=>this.dataReceived(i)),this.handsfree.getUserMedia(()=>{this.handsfree.mediapipeWarmups.isWarmingUp?this.handsfree.on("mediapipeWarmedUp",()=>{!this.handsfree.mediapipeWarmups.isWarmingUp&&!this.handsfree.mediapipeWarmups[this.name]&&this.warmUp(e)}):this.warmUp(e)}),this.loadDependency(`${this.handsfree.config.assetsPath}/@mediapipe/drawing_utils.js`,null,!!window.drawConnectors)})}warmUp(e){this.handsfree.mediapipeWarmups[this.name]=!0,this.handsfree.mediapipeWarmups.isWarmingUp=!0,this.api.send({image:this.handsfree.debug.$video}).then(()=>{this.handsfree.mediapipeWarmups.isWarmingUp=!1,this.onWarmUp(e)})}onWarmUp(e){this.dependenciesLoaded=!0,document.body.classList.add("handsfree-model-facemesh"),this.handsfree.emit("modelReady",this),this.handsfree.emit("facemeshModelReady",this),this.handsfree.emit("mediapipeWarmedUp",this),e&&e(this)}getData(){return $e(this,null,function*(){this.dependenciesLoaded&&(yield this.api.send({image:this.handsfree.debug.$video}))})}dataReceived(e){this.data=e,this.handsfree.data.facemesh=e,this.handsfree.isDebugging&&this.debug(e)}debug(e){if("undefined"!=typeof drawConnectors&&(this.handsfree.debug.context.facemesh.clearRect(0,0,this.handsfree.debug.$canvas.facemesh.width,this.handsfree.debug.$canvas.facemesh.height),e.multiFaceLandmarks))for(const i of e.multiFaceLandmarks)drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_TESSELATION,{color:"#C0C0C070",lineWidth:1}),drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_RIGHT_EYE,{color:"#FF3030"}),drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_RIGHT_EYEBROW,{color:"#FF3030"}),drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_LEFT_EYE,{color:"#30FF30"}),drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_LEFT_EYEBROW,{color:"#30FF30"}),drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_FACE_OVAL,{color:"#E0E0E0"}),drawConnectors(this.handsfree.debug.context.facemesh,i,FACEMESH_LIPS,{color:"#E0E0E0"})}}class Ie extends he{constructor(e,i){super(e,i),this.name="pose",this.hasLoadedAndRun=!1,this.palmPoints=[0,1,2,5,9,13,17]}loadDependencies(e){this.handsfree.config.isClient?this.loadDependency(`${this.handsfree.config.assetsPath}/@mediapipe/drawing_utils.js`,()=>{this.onWarmUp(e)},!!window.drawConnectors):this.loadDependency(`${this.handsfree.config.assetsPath}/@mediapipe/pose/pose.js`,()=>{this.api=new window.Pose({locateFile:i=>`${this.handsfree.config.assetsPath}/@mediapipe/pose/${i}`}),this.api.setOptions(this.handsfree.config.pose),this.api.onResults(i=>this.dataReceived(i)),this.handsfree.getUserMedia(()=>{this.handsfree.mediapipeWarmups.isWarmingUp?this.handsfree.on("mediapipeWarmedUp",()=>{!this.handsfree.mediapipeWarmups.isWarmingUp&&!this.handsfree.mediapipeWarmups[this.name]&&this.warmUp(e)}):this.warmUp(e)}),this.loadDependency(`${this.handsfree.config.assetsPath}/@mediapipe/drawing_utils.js`,null,!!window.drawConnectors)})}warmUp(e){this.handsfree.mediapipeWarmups[this.name]=!0,this.handsfree.mediapipeWarmups.isWarmingUp=!0,this.api.send({image:this.handsfree.debug.$video}).then(()=>{this.handsfree.mediapipeWarmups.isWarmingUp=!1,this.onWarmUp(e)})}onWarmUp(e){this.dependenciesLoaded=!0,document.body.classList.add("handsfree-model-pose"),this.handsfree.emit("modelReady",this),this.handsfree.emit("poseModelReady",this),this.handsfree.emit("mediapipeWarmedUp",this),e&&e(this)}getData(){return $e(this,null,function*(){this.dependenciesLoaded&&(yield this.api.send({image:this.handsfree.debug.$video}))})}dataReceived(e){this.data=e,this.handsfree.data.pose=e,this.handsfree.isDebugging&&this.debug(e)}debug(e){this.handsfree.debug.context.pose.clearRect(0,0,this.handsfree.debug.$canvas.pose.width,this.handsfree.debug.$canvas.pose.height),e.poseLandmarks&&(drawConnectors(this.handsfree.debug.context.pose,e.poseLandmarks,POSE_CONNECTIONS,{color:"#00FF00",lineWidth:4}),drawLandmarks(this.handsfree.debug.context.pose,e.poseLandmarks,{color:"#FF0000",lineWidth:2}))}}class Vt extends he{constructor(e,i){super(e,i),this.name="handpose",this.three={scene:null,camera:null,renderer:null,meshes:[]},this.normalized=[],this.palmPoints=[0,1,2,5,9,13,17],this.gestureEstimator=new pe.GestureEstimator([])}loadDependencies(e){this.loadDependency(`${this.handsfree.config.assetsPath}/three/three.min.js`,()=>{this.loadDependency(`${this.handsfree.config.assetsPath}/@tensorflow/tf-core.js`,()=>{this.loadDependency(`${this.handsfree.config.assetsPath}/@tensorflow/tf-converter.js`,()=>{this.loadDependency(`${this.handsfree.config.assetsPath}/@tensorflow/tf-backend-${this.handsfree.config.handpose.backend}.js`,()=>{this.loadDependency(`${this.handsfree.config.assetsPath}/@tensorflow-models/handpose/handpose.js`,()=>{this.handsfree.getUserMedia(()=>$e(this,null,function*(){yield window.tf.setBackend(this.handsfree.config.handpose.backend),this.api=yield handpose.load(this.handsfree.config.handpose.model),this.setup3D(),e&&e(this),this.dependenciesLoaded=!0,this.handsfree.emit("modelReady",this),this.handsfree.emit("handposeModelReady",this),document.body.classList.add("handsfree-model-handpose")}))})})})},!!window.tf)},!!window.THREE)}getData(){return $e(this,null,function*(){if(!this.handsfree.debug.$video)return;const e=yield this.api.estimateHands(this.handsfree.debug.$video);return this.handsfree.data.handpose=this.data=Gt(Wt({},e[0]),{normalized:this.normalized,meshes:this.three.meshes}),e[0]&&this.updateMeshes(this.data),this.three.renderer.render(this.three.scene,this.three.camera),this.data})}setup3D(){this.three={scene:new window.THREE.Scene,camera:new window.THREE.PerspectiveCamera(90,window.outerWidth/window.outerHeight,.1,1e3),renderer:new THREE.WebGLRenderer({alpha:!0,canvas:this.handsfree.debug.$canvas.handpose}),meshes:[]},this.three.renderer.setSize(window.outerWidth,window.outerHeight),this.three.camera.position.z=this.handsfree.debug.$video.videoWidth/4,this.three.camera.lookAt(new window.THREE.Vector3(0,0,0)),this.three.screen=new window.THREE.Mesh(new window.THREE.BoxGeometry(window.outerWidth,window.outerHeight,1),new window.THREE.MeshNormalMaterial),this.three.screen.position.z=300,this.three.scene.add(this.three.screen),this.three.raycaster=new window.THREE.Raycaster,this.three.arrow=new window.THREE.ArrowHelper(this.three.raycaster.ray.direction,this.three.raycaster.ray.origin,300,16711680),this.three.scene.add(this.three.arrow);for(let h=0;h<21;h++){const{isPalm:c}=this.getLandmarkProperty(h),g=new window.THREE.Object3D,E=new window.THREE.CylinderGeometry(c?5:10,5,1);let C=new window.THREE.MeshNormalMaterial;const z=new window.THREE.Mesh(E,C);z.rotation.x=Math.PI/2,g.add(z),this.three.scene.add(g),this.three.meshes.push(g)}const e=new window.THREE.Object3D,i=new window.THREE.CylinderGeometry(5,5,1);let n=new window.THREE.MeshNormalMaterial;const l=new window.THREE.Mesh(i,n);l.rotation.x=Math.PI/2,this.three.centerPalmObj=e,e.add(l),this.three.scene.add(e),this.three.meshes.push(e),this.three.screen.visible=!1}getLandmarkProperty(e){const i=[0,1,2,5,9,13,17],n=i.indexOf(e),l=-1!=n;let h;return h=l?i[(n+1)%i.length]:e-1,{isPalm:l,next:h}}updateMeshes(e){for(let i=0;i<this.three.meshes.length-1;i++){const{next:n}=this.getLandmarkProperty(i),l=this.webcam2space(...e.landmarks[i]),h=this.webcam2space(...e.landmarks[n]),c=l.clone().lerp(h,.5);if(this.three.meshes[i].position.set(c.x,c.y,c.z),this.normalized[i]=[this.handsfree.normalize(l.x,this.handsfree.debug.$video.videoWidth/-2,this.handsfree.debug.$video.videoWidth/2),this.handsfree.normalize(l.y,this.handsfree.debug.$video.videoHeight/-2,this.handsfree.debug.$video.videoHeight/2),this.three.meshes[i].position.z],this.three.meshes[i].scale.z=l.distanceTo(h),this.three.meshes[i].lookAt(h),8===i){this.three.arrow.position.set(c.x,c.y,c.z);const g=(new window.THREE.Vector3).subVectors(l,c);this.three.arrow.setDirection(g.normalize()),this.three.arrow.setLength(800),this.three.arrow.direction=g}}this.updateCenterPalmMesh(e)}updateCenterPalmMesh(e){let i=[],n={x:0,y:0,z:0};this.palmPoints.forEach((l,h)=>{i.push(this.webcam2space(...e.landmarks[l])),n.x+=i[h].x,n.y+=i[h].y,n.z+=i[h].z}),n.x=n.x/this.palmPoints.length,n.y=n.y/this.palmPoints.length,n.z=n.z/this.palmPoints.length,this.three.centerPalmObj.position.set(n.x,n.y,n.z),this.three.centerPalmObj.scale.z=10,this.three.centerPalmObj.rotation.x=this.three.meshes[12].rotation.x-Math.PI/2,this.three.centerPalmObj.rotation.y=-this.three.meshes[12].rotation.y,this.three.centerPalmObj.rotation.z=this.three.meshes[12].rotation.z}webcam2space(e,i,n){return new window.THREE.Vector3(e-this.handsfree.debug.$video.videoWidth/2,-(i-this.handsfree.debug.$video.videoHeight/2),-n)}updateGestureEstimator(){const e=[],i=[];this.gestures.forEach(n=>{if(this.handsfree.gesture[n].enabled&&e.push(n),!this.handsfree.gesture[n].compiledDescription&&this.handsfree.gesture[n].enabled){const l=new pe.GestureDescription(n);this.handsfree.gesture[n].description.forEach(h=>{switch(h[0]){case"addCurl":l[h[0]](pe.Finger[h[1]],pe.FingerCurl[h[2]],h[3]);break;case"addDirection":l[h[0]](pe.Finger[h[1]],pe.FingerDirection[h[2]],h[3]);break;case"setWeight":l[h[0]](pe.Finger[h[1]],h[2])}}),this.handsfree.gesture[n].compiledDescription=l}}),e.forEach(n=>{i.push(this.handsfree.gesture[n].compiledDescription)}),e.length&&(this.gestureEstimator=new pe.GestureEstimator(i))}getGesture(){let e=null;if(this.data.landmarks&&this.gestureEstimator){const i=this.gestureEstimator.estimate(this.data.landmarks,7.5);i.gestures.length&&(e=i.gestures.reduce((n,l)=>n.confidence>l.confidence?n:l))}return e}}class Bt extends he{constructor(e,i){super(e,i),this.name="weboji"}loadDependencies(e){this.handsfree.config.isClient?this.onReady(e):this.loadDependency(`${this.handsfree.config.assetsPath}/jeeliz/jeelizFaceTransfer.js`,()=>{const i=this.handsfree.config.assetsPath+"/jeeliz/jeelizFaceTransferNNC.json";this.api=window.JEEFACETRANSFERAPI,fetch(i).then(n=>n.json()).then(n=>{this.api.init({canvasId:`handsfree-canvas-weboji-${this.handsfree.id}`,NNC:JSON.stringify(n),videoSettings:this.handsfree.config.weboji.videoSettings,callbackReady:()=>this.onReady(e)})}).catch(n=>{console.log(n),console.error(`Couldn't load weboji tracking model at ${i}`),this.handsfree.emit("modelError",n)})})}onReady(e){this.dependenciesLoaded=!0,this.handsfree.emit("modelReady",this),this.handsfree.emit("webojiModelReady",this),document.body.classList.add("handsfree-model-weboji"),e&&e(this)}getData(){return this.data.rotation=this.api.get_rotationStabilized(),this.data.translation=this.api.get_positionScale(),this.data.morphs=this.api.get_morphTargetInfluencesStabilized(),this.data.state=this.getStates(),this.data.degree=this.getDegrees(),this.data.isDetected=this.api.is_detected(),this.handsfree.data.weboji=this.data,this.data}getDegrees(){return[180*this.data.rotation[0]/Math.PI,180*this.data.rotation[1]/Math.PI,180*this.data.rotation[2]/Math.PI]}getStates(){const e=this.data.morphs,i=this.data.state||{};return i.smileRight=e[0]>this.handsfree.config.weboji.morphs.threshold.smileRight,i.smileLeft=e[1]>this.handsfree.config.weboji.morphs.threshold.smileLeft,i.smile=i.smileRight&&i.smileLeft,i.smirk=i.smileRight&&!i.smileLeft||!i.smileRight&&i.smileLeft,i.pursed=e[7]>this.handsfree.config.weboji.morphs.threshold.mouthRound,i.browLeftUp=e[4]>this.handsfree.config.weboji.morphs.threshold.browLeftUp,i.browRightUp=e[5]>this.handsfree.config.weboji.morphs.threshold.browRightUp,i.browsUp=e[4]>this.handsfree.config.weboji.morphs.threshold.browLeftUp&&e[5]>this.handsfree.config.weboji.morphs.threshold.browLeftUp,i.browLeftDown=e[2]>this.handsfree.config.weboji.morphs.threshold.browLeftDown,i.browRightDown=e[3]>this.handsfree.config.weboji.morphs.threshold.browRightDown,i.browsDown=e[2]>this.handsfree.config.weboji.morphs.threshold.browLeftDown&&e[3]>this.handsfree.config.weboji.morphs.threshold.browLeftDown,i.browsUpDown=i.browLeftDown&&i.browRightUp||i.browRightDown&&i.browLeftUp,i.eyeLeftClosed=e[8]>this.handsfree.config.weboji.morphs.threshold.eyeLeftClosed,i.eyeRightClosed=e[9]>this.handsfree.config.weboji.morphs.threshold.eyeRightClosed,i.eyesClosed=i.eyeLeftClosed&&i.eyeRightClosed,i.mouthClosed=0===e[6],i.mouthOpen=e[6]>this.handsfree.config.weboji.morphs.threshold.mouthOpen,i}}var Be=function Kt(t,e){return t===e||t!=t&&e!=e},qe=function Xt(t,e){for(var i=t.length;i--;)if(Be(t[i][0],e))return i;return-1},Zt=Array.prototype.splice;function Oe(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}Oe.prototype.clear=function qt(){this.__data__=[],this.size=0},Oe.prototype.delete=function Jt(t){var e=this.__data__,i=qe(e,t);return!(i<0||(i==e.length-1?e.pop():Zt.call(e,i,1),--this.size,0))},Oe.prototype.get=function ti(t){var e=this.__data__,i=qe(e,t);return i<0?void 0:e[i][1]},Oe.prototype.has=function si(t){return qe(this.__data__,t)>-1},Oe.prototype.set=function ri(t,e){var i=this.__data__,n=qe(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this};var t,Ye=Oe,ut="object"==typeof ne&&ne&&ne.Object===Object&&ne,gi="object"==typeof self&&self&&self.Object===Object&&self,De=ut||gi||Function("return this")(),vi=De.Symbol,ct=Object.prototype,yi=ct.hasOwnProperty,bi=ct.toString,He=vi?vi.toStringTag:void 0,Si=Object.prototype.toString,pt=vi?vi.toStringTag:void 0,Ne=function $i(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":pt&&pt in Object(t)?function wi(t){var e=yi.call(t,He),i=t[He];try{t[He]=void 0;var n=!0}catch(h){}var l=bi.call(t);return n&&(e?t[He]=i:delete t[He]),l}(t):function Ei(t){return Si.call(t)}(t)},we=function Ri(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Je=function Mi(t){if(!we(t))return!1;var e=Ne(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Fi=De["__core-js_shared__"],mt=(t=/[^.]+$/.exec(Fi&&Fi.keys&&Fi.keys.IE_PROTO||""))?"Symbol(src)_1."+t:"",Hi=Function.prototype.toString,Gi=/^\[object .+?Constructor\]$/,Ki=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qi=function Xi(t){return!(!we(t)||function ki(t){return!!mt&&mt in t}(t))&&(Je(t)?Ki:Gi).test(function Ni(t){if(null!=t){try{return Hi.call(t)}catch(e){}try{return t+""}catch(e){}}return""}(t))},tt=function es(t,e){var i=function Zi(t,e){return null==t?void 0:t[e]}(t,e);return Qi(i)?i:void 0},gt=tt(De,"Map"),ze=tt(Object,"create"),hs=Object.prototype.hasOwnProperty,cs=Object.prototype.hasOwnProperty;function Ae(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}Ae.prototype.clear=function ss(){this.__data__=ze?ze(null):{},this.size=0},Ae.prototype.delete=function rs(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ae.prototype.get=function fs(t){var e=this.__data__;if(ze){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return hs.call(e,t)?e[t]:void 0},Ae.prototype.has=function ps(t){var e=this.__data__;return ze?void 0!==e[t]:cs.call(e,t)},Ae.prototype.set=function _s(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=ze&&void 0===e?"__lodash_hash_undefined__":e,this};var _t=Ae,Xe=function Ps(t,e){var i=t.__data__;return function ws(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?i["string"==typeof e?"string":"hash"]:i.map};function Le(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}Le.prototype.clear=function ys(){this.size=0,this.__data__={hash:new _t,map:new(gt||Ye),string:new _t}},Le.prototype.delete=function Ss(t){var e=Xe(this,t).delete(t);return this.size-=e?1:0,e},Le.prototype.get=function xs(t){return Xe(this,t).get(t)},Le.prototype.has=function Cs(t){return Xe(this,t).has(t)},Le.prototype.set=function Rs(t,e){var i=Xe(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this};var As=Le;function je(t){var e=this.__data__=new Ye(t);this.size=e.size}je.prototype.clear=function oi(){this.__data__=new Ye,this.size=0},je.prototype.delete=function hi(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},je.prototype.get=function di(t){return this.__data__.get(t)},je.prototype.has=function ci(t){return this.__data__.has(t)},je.prototype.set=function js(t,e){var i=this.__data__;if(i instanceof Ye){var n=i.__data__;if(!gt||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new As(n)}return i.set(t,e),this.size=i.size,this};var Fs=je,ks=function(){try{var t=tt(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),Qe=ks,it=function Us(t,e,i){"__proto__"==e&&Qe?Qe(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i},st=function Is(t,e,i){(void 0!==i&&!Be(t[e],i)||void 0===i&&!(e in t))&&it(t,e,i)},Ws=function Hs(t){return function(e,i,n){for(var l=-1,h=Object(e),c=n(e),g=c.length;g--;){var E=c[t?g:++l];if(!1===i(h[E],E,h))break}return e}}(),Gs=Re(function(t,e){var i=e&&!e.nodeType&&e,n=i&&t&&!t.nodeType&&t,h=n&&n.exports===i?De.Buffer:void 0,c=h?h.allocUnsafe:void 0;t.exports=function g(E,C){if(C)return E.slice();var z=E.length,Y=c?c(z):new E.constructor(z);return E.copy(Y),Y}}),vt=De.Uint8Array,Ks=function Ys(t,e){var i=e?function Bs(t){var e=new t.constructor(t.byteLength);return new vt(e).set(new vt(t)),e}(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)},yt=Object.create,Zs=function(){function t(){}return function(e){if(!we(e))return{};if(yt)return yt(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}(),Js=Zs,bt=function en(t,e){return function(i){return t(e(i))}}(Object.getPrototypeOf,Object),nn=Object.prototype,wt=function rn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||nn)},Me=function ln(t){return null!=t&&"object"==typeof t},Tt=function fn(t){return Me(t)&&"[object Arguments]"==Ne(t)},Pt=Object.prototype,dn=Pt.hasOwnProperty,un=Pt.propertyIsEnumerable,cn=Tt(function(){return arguments}())?Tt:function(t){return Me(t)&&dn.call(t,"callee")&&!un.call(t,"callee")},nt=cn,rt=Array.isArray,St=function gn(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},at=function _n(t){return null!=t&&St(t.length)&&!Je(t)},wn=function bn(){return!1},Et=Re(function(t,e){var i=e&&!e.nodeType&&e,n=i&&t&&!t.nodeType&&t,h=n&&n.exports===i?De.Buffer:void 0;t.exports=(h?h.isBuffer:void 0)||wn}),xt=Function.prototype.toString,En=Object.prototype.hasOwnProperty,xn=xt.call(Object),ee={};ee["[object Float32Array]"]=ee["[object Float64Array]"]=ee["[object Int8Array]"]=ee["[object Int16Array]"]=ee["[object Int32Array]"]=ee["[object Uint8Array]"]=ee["[object Uint8ClampedArray]"]=ee["[object Uint16Array]"]=ee["[object Uint32Array]"]=!0,ee["[object Arguments]"]=ee["[object Array]"]=ee["[object ArrayBuffer]"]=ee["[object Boolean]"]=ee["[object DataView]"]=ee["[object Date]"]=ee["[object Error]"]=ee["[object Function]"]=ee["[object Map]"]=ee["[object Number]"]=ee["[object Object]"]=ee["[object RegExp]"]=ee["[object Set]"]=ee["[object String]"]=ee["[object WeakMap]"]=!1;var Dt=Re(function(t,e){var i=e&&!e.nodeType&&e,n=i&&t&&!t.nodeType&&t,h=n&&n.exports===i&&ut.process,c=function(){try{return n&&n.require&&n.require("util").types||h&&h.binding&&h.binding("util")}catch(E){}}();t.exports=c}),Ct=Dt&&Dt.isTypedArray,$t=Ct?function tr(t){return function(e){return t(e)}}(Ct):function Jn(t){return Me(t)&&St(t.length)&&!!ee[Ne(t)]},ot=function nr(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},ar=Object.prototype.hasOwnProperty,lr=function or(t,e,i){var n=t[e];(!ar.call(t,e)||!Be(n,i)||void 0===i&&!(e in t))&&it(t,e,i)},pr=/^(?:0|[1-9]\d*)$/,Rt=function mr(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&pr.test(t))&&t>-1&&t%1==0&&t<e},_r=Object.prototype.hasOwnProperty,yr=function vr(t,e){var i=rt(t),n=!i&&nt(t),l=!i&&!n&&Et(t),h=!i&&!n&&!l&&$t(t),c=i||n||l||h,g=c?function dr(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}(t.length,String):[],E=g.length;for(var C in t)(e||_r.call(t,C))&&(!c||!("length"==C||l&&("offset"==C||"parent"==C)||h&&("buffer"==C||"byteLength"==C||"byteOffset"==C)||Rt(C,E)))&&g.push(C);return g},Pr=Object.prototype.hasOwnProperty,Er=function Sr(t){if(!we(t))return function br(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=wt(t),i=[];for(var n in t)"constructor"==n&&(e||!Pr.call(t,n))||i.push(n);return i},Ot=function xr(t){return at(t)?yr(t,!0):Er(t)},Cr=function Dr(t){return function hr(t,e,i,n){var l=!i;i||(i={});for(var h=-1,c=e.length;++h<c;){var g=e[h],E=n?n(i[g],t[g],g,i,t):void 0;void 0===E&&(E=t[g]),l?it(i,g,E):lr(i,g,E)}return i}(t,Ot(t))},Rr=function $r(t,e,i,n,l,h,c){var g=ot(t,i),E=ot(e,i),C=c.get(E);if(C)st(t,i,C);else{var z=h?h(g,E,i+"",t,e,c):void 0,Y=void 0===z;if(Y){var v=rt(E),d=!v&&Et(E),b=!v&&!d&&$t(E);z=E,v||d||b?rt(g)?z=g:function vn(t){return Me(t)&&at(t)}(g)?z=function Xs(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}(g):d?(Y=!1,z=Gs(E,!0)):b?(Y=!1,z=Ks(E,!0)):z=[]:function Dn(t){if(!Me(t)||"[object Object]"!=Ne(t))return!1;var e=bt(t);if(null===e)return!0;var i=En.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&xt.call(i)==xn}(E)||nt(E)?(z=g,nt(g)?z=Cr(g):(!we(g)||Je(g))&&(z=function an(t){return"function"!=typeof t.constructor||wt(t)?{}:Js(bt(t))}(E))):Y=!1}Y&&(c.set(E,z),l(z,E,n,h,c),c.delete(E)),st(t,i,z)}},Or=function At(t,e,i,n,l){t!==e&&Ws(e,function(h,c){if(l||(l=new Fs),we(h))Rr(t,e,c,i,At,n,l);else{var g=n?n(ot(t,c),h,c+"",t,e,l):void 0;void 0===g&&(g=h),st(t,c,g)}},Ot)},Lt=function Ar(t){return t},jr=function Lr(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)},jt=Math.max,Ur=function kr(t){return function(){return t}},Ir=Qe?function(t,e){return Qe(t,"toString",{configurable:!0,enumerable:!1,value:Ur(e),writable:!0})}:Lt,Wr=Date.now,qr=function Gr(t){var e=0,i=0;return function(){var n=Wr(),l=16-(n-i);if(i=n,l>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Ir),Kr=function Yr(t,e){return qr(function Mr(t,e,i){return e=jt(void 0===e?t.length-1:e,0),function(){for(var n=arguments,l=-1,h=jt(n.length-e,0),c=Array(h);++l<h;)c[l]=n[e+l];l=-1;for(var g=Array(e+1);++l<e;)g[l]=n[l];return g[e]=i(c),jr(t,this,g)}}(t,e,Lt),t+"")},ea=function Zr(t){return Kr(function(e,i){var n=-1,l=i.length,h=l>1?i[l-1]:void 0,c=l>2?i[2]:void 0;for(h=t.length>3&&"function"==typeof h?(l--,h):void 0,c&&function Xr(t,e,i){if(!we(i))return!1;var n=typeof e;return!!("number"==n?at(i)&&Rt(e,i.length):"string"==n&&e in i)&&Be(i[e],t)}(i[0],i[1],c)&&(h=l<3?void 0:h,l=1),e=Object(e);++n<l;){var g=i[n];g&&t(e,g,n,h)}return e})}(function(t,e,i){Or(t,e,i)}),Fe=ea;class ta{constructor(e,i){var n,l;this.plugin=e,this.handsfree=i,Object.keys(e).forEach(c=>{this[c]=e[c]});let h=null===(n=i.config)||void 0===n||null===(l=n.plugin)||void 0===l?void 0:l[e.name];"boolean"==typeof h&&(h={enabled:h}),"object"==typeof h&&(Fe(this.config,h),"boolean"==typeof h.enabled&&(this.enabled=h.enabled))}enable(){!this.enabled&&this.onEnable&&this.onEnable(this.handsfree),this.enabled=!0}disable(){this.enabled&&this.onDisable&&this.onDisable(this.handsfree),this.enabled=!1}}class sa extends class ia{constructor(e,i){var n,l;this.handsfree=i,Object.keys(e).forEach(c=>{this[c]=e[c]});let h=null===(n=i.config)||void 0===n||null===(l=n.gesture)||void 0===l?void 0:l[e.name];"boolean"==typeof h&&(h={enabled:h}),"object"==typeof h&&(Fe(this.config,h),"boolean"==typeof h.enabled&&(this.enabled=h.enabled))}enable(){this.enabled=!0,this.updateGestureEstimator()}disable(){this.enabled=!1,this.updateGestureEstimator()}updateGestureEstimator(){this.models.forEach(e=>{this.handsfree.model[e].updateGestureEstimator()})}}{constructor(e,i){super(e,i),this.algorithm="fingerpose",this.compiledDescription=null}}var na={autostart:!1,assetsPath:"https://unpkg.com/handsfree@8.5.1/build/lib/assets",isClient:!1,gesture:{},setup:{canvas:{weboji:{$el:null,width:1280,height:720},hands:{$el:null,width:1280,height:720},handpose:{$el:null,width:1280,height:720},pose:{$el:null,width:1280,height:720},facemesh:{$el:null,width:1280,height:720}},video:{$el:null,width:1280,height:720},wrap:{$el:null,$parent:null}},weboji:{enabled:!1,throttle:0,videoSettings:{videoElement:null,deviceId:null,facingMode:"user",idealWidth:320,idealHeight:240,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280},morphs:{threshold:{smileRight:.7,smileLeft:.7,browLeftDown:.8,browRightDown:.8,browLeftUp:.8,browRightUp:.8,eyeLeftClosed:.4,eyeRightClosed:.4,mouthOpen:.3,mouthRound:.8,upperLip:.5}}},hands:{enabled:!1,maxNumHands:2,minDetectionConfidence:.5,minTrackingConfidence:.5},facemesh:{enabled:!1,maxNumFaces:1,minDetectionConfidence:.5,minTrackingConfidence:.5},pose:{enabled:!1,upperBodyOnly:!1,smoothLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5},handpose:{enabled:!1,backend:"webgl",maxContinuousChecks:1/0,detectionConfidence:.8,iouThreshold:.3,scoreThreshold:.75},plugin:{}},lt=function(){return De.Date.now()},ha=/^\s+|\s+$/g,fa=/^[-+]0x[0-9a-f]+$/i,da=/^0b[01]+$/i,ua=/^0o[0-7]+$/i,ca=parseInt,Ft=function pa(t){if("number"==typeof t)return t;if(function oa(t){return"symbol"==typeof t||Me(t)&&"[object Symbol]"==Ne(t)}(t))return NaN;if(we(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=we(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ha,"");var i=da.test(t);return i||ua.test(t)?ca(t.slice(2),i?2:8):fa.test(t)?NaN:+t},ga=Math.max,_a=Math.min,kt=function wa(t,e,i){var n=!0,l=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return we(i)&&(n="leading"in i?!!i.leading:n,l="trailing"in i?!!i.trailing:l),function va(t,e,i){var n,l,h,c,g,E,C=0,z=!1,Y=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function d(H){var te=n,X=l;return n=l=void 0,C=H,c=t.apply(X,te)}function b(H){return C=H,g=setTimeout(k,e),z?d(H):c}function f(H){var te=H-E;return void 0===E||te>=e||te<0||Y&&H-C>=h}function k(){var H=lt();if(f(H))return W(H);g=setTimeout(k,function p(H){var U=e-(H-E);return Y?_a(U,h-(H-C)):U}(H))}function W(H){return g=void 0,v&&n?d(H):(n=l=void 0,c)}function F(){var H=lt(),te=f(H);if(n=arguments,l=this,E=H,te){if(void 0===g)return b(E);if(Y)return clearTimeout(g),g=setTimeout(k,e),d(E)}return void 0===g&&(g=setTimeout(k,e)),c}return e=Ft(e)||0,we(i)&&(z=!!i.leading,h=(Y="maxWait"in i)?ga(Ft(i.maxWait)||0,e):h,v="trailing"in i?!!i.trailing:v),F.cancel=function B(){void 0!==g&&clearTimeout(g),C=0,n=E=l=g=void 0},F.flush=function K(){return void 0===g?c:W(lt())},F}(t,e,{leading:n,maxWait:e,trailing:l})},ht="undefined"!=typeof window?window:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:window||{},me=function(t){var e={},i=t.document,n=t.GreenSockGlobals=t.GreenSockGlobals||t;if(n.TweenLite)return n.TweenLite;var z,Y,v,d,b,s,a,l=function(s){var r,a=s.split("."),o=n;for(r=0;r<a.length;r++)o[a[r]]=o=o[a[r]]||{};return o},h=l("com.greensock"),c=1e-8,g=function(s){var r,a=[],o=s.length;for(r=0;r!==o;a.push(s[r++]));return a},E=function(){},C=(a=(s=Object.prototype.toString).call([]),function(o){return null!=o&&(o instanceof Array||"object"==typeof o&&!!o.push&&s.call(o)===a)}),p={},f=function(s,a,o,r){this.sc=p[s]?p[s].sc:[],p[s]=this,this.gsClass=null,this.func=o;var u=[];this.check=function(m){for(var T,O,L,M,w=a.length,P=w;--w>-1;)(T=p[a[w]]||new f(a[w],[])).gsClass?(u[w]=T.gsClass,P--):m&&T.sc.push(this);if(0===P&&o)for(L=(O=("com.greensock."+s).split(".")).pop(),M=l(O.join("."))[L]=this.gsClass=o.apply(o,u),r&&(n[L]=e[L]=M),w=0;w<this.sc.length;w++)this.sc[w].check()},this.check(!0)},k=t._gsDefine=function(s,a,o,r){return new f(s,a,o,r)},W=h._class=function(s,a,o){return a=a||function(){},k(s,[],function(){return a},o),a};k.globals=n;var B=[0,0,1,1],K=W("easing.Ease",function(s,a,o,r){this._func=s,this._type=o||0,this._power=r||0,this._params=a?B.concat(a):B},!0),F=K.map={},H=K.register=function(s,a,o,r){for(var P,T,O,L,u=a.split(","),m=u.length,w=(o||"easeIn,easeOut,easeInOut").split(",");--m>-1;)for(T=u[m],P=r?W("easing."+T,null,!0):h.easing[T]||{},O=w.length;--O>-1;)F[T+"."+(L=w[O])]=F[L+T]=P[L]=s.getRatio?s:s[L]||new s};for((v=K.prototype)._calcEnd=!1,v.getRatio=function(s){if(this._func)return this._params[0]=s,this._func.apply(null,this._params);var a=this._type,o=this._power,r=1===a?1-s:2===a?s:s<.5?2*s:2*(1-s);return 1===o?r*=r:2===o?r*=r*r:3===o?r*=r*r*r:4===o&&(r*=r*r*r*r),1===a?1-r:2===a?r:s<.5?r/2:1-r/2},Y=(z=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--Y>-1;)v=z[Y]+",Power"+Y,H(new K(null,null,1,Y),v,"easeOut",!0),H(new K(null,null,2,Y),v,"easeIn"+(0===Y?",easeNone":"")),H(new K(null,null,3,Y),v,"easeInOut");F.linear=h.easing.Linear.easeIn,F.swing=h.easing.Quad.easeInOut;var te=W("events.EventDispatcher",function(s){this._listeners={},this._eventTarget=s||this});(v=te.prototype).addEventListener=function(s,a,o,r,u){u=u||0;var P,T,m=this._listeners[s],w=0;for(this===d&&!b&&d.wake(),null==m&&(this._listeners[s]=m=[]),T=m.length;--T>-1;)(P=m[T]).c===a&&P.s===o?m.splice(T,1):0===w&&P.pr<u&&(w=T+1);m.splice(w,0,{c:a,s:o,up:r,pr:u})},v.removeEventListener=function(s,a){var r,o=this._listeners[s];if(o)for(r=o.length;--r>-1;)if(o[r].c===a)return void o.splice(r,1)},v.dispatchEvent=function(s){var o,r,u,a=this._listeners[s];if(a)for((o=a.length)>1&&(a=a.slice(0)),r=this._eventTarget;--o>-1;)(u=a[o])&&(u.up?u.c.call(u.s||r,{type:s,target:r}):u.c.call(u.s||r))};var X=t.requestAnimationFrame,U=t.cancelAnimationFrame,q=Date.now||function(){return(new Date).getTime()},j=q();for(Y=(z=["ms","moz","webkit","o"]).length;--Y>-1&&!X;)X=t[z[Y]+"RequestAnimationFrame"],U=t[z[Y]+"CancelAnimationFrame"]||t[z[Y]+"CancelRequestAnimationFrame"];W("Ticker",function(s,a){var T,O,L,M,Z,o=this,r=q(),u=!(!1===a||!X)&&"auto",m=500,w=33,V=function(oe){var Ge,Ht,Ce=q()-j;Ce>m&&(r+=Ce-w),o.time=((j+=Ce)-r)/1e3,Ge=o.time-Z,(!T||Ge>0||!0===oe)&&(o.frame++,Z+=Ge+(Ge>=M?.004:M-Ge),Ht=!0),!0!==oe&&(L=O(V)),Ht&&o.dispatchEvent("tick")};te.call(o),o.time=o.frame=0,o.tick=function(){V(!0)},o.lagSmoothing=function(oe,Ce){if(!arguments.length)return m<1/c;m=oe||1/c,w=Math.min(Ce,m,0)},o.sleep=function(){null!=L&&(u&&U?U(L):clearTimeout(L),O=E,L=null,o===d&&(b=!1))},o.wake=function(oe){null!==L?o.sleep():oe?r+=-j+(j=q()):o.frame>10&&(j=q()-m+5),O=0===T?E:u&&X?X:function(Ce){return setTimeout(Ce,1e3*(Z-o.time)+1|0)},o===d&&(b=!0),V(2)},o.fps=function(oe){if(!arguments.length)return T;Z=this.time+(M=1/((T=oe)||60)),o.wake()},o.useRAF=function(oe){if(!arguments.length)return u;o.sleep(),u=oe,o.fps(T)},o.fps(s),setTimeout(function(){"auto"===u&&o.frame<5&&"hidden"!==(i||{}).visibilityState&&o.useRAF(!1)},1500)}),(v=h.Ticker.prototype=new h.events.EventDispatcher).constructor=h.Ticker;var re=W("core.Animation",function(s,a){if(this.vars=a=a||{},this._duration=this._totalDuration=s||0,this._delay=Number(a.delay)||0,this._timeScale=1,this._active=!!a.immediateRender,this.data=a.data,this._reversed=!!a.reversed,J){b||d.wake();var o=this.vars.useFrames?se:J;o.add(this,o._time),this.vars.paused&&this.paused(!0)}});d=re.ticker=new h.Ticker,(v=re.prototype)._dirty=v._gc=v._initted=v._paused=!1,v._totalTime=v._time=0,v._rawPrevTime=-1,v._next=v._last=v._onUpdate=v._timeline=v.timeline=null,v._paused=!1;var le=function(){b&&q()-j>2e3&&("hidden"!==(i||{}).visibilityState||!d.lagSmoothing())&&d.wake();var s=setTimeout(le,2e3);s.unref&&s.unref()};le(),v.play=function(s,a){return null!=s&&this.seek(s,a),this.reversed(!1).paused(!1)},v.pause=function(s,a){return null!=s&&this.seek(s,a),this.paused(!0)},v.resume=function(s,a){return null!=s&&this.seek(s,a),this.paused(!1)},v.seek=function(s,a){return this.totalTime(Number(s),!1!==a)},v.restart=function(s,a){return this.reversed(!1).paused(!1).totalTime(s?-this._delay:0,!1!==a,!0)},v.reverse=function(s,a){return null!=s&&this.seek(s||this.totalDuration(),a),this.reversed(!0).paused(!1)},v.render=function(s,a,o){},v.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},v.isActive=function(){var o,s=this._timeline,a=this._startTime;return!s||!this._gc&&!this._paused&&s.isActive()&&(o=s.rawTime(!0))>=a&&o<a+this.totalDuration()/this._timeScale-c},v._enabled=function(s,a){return b||d.wake(),this._gc=!s,this._active=this.isActive(),!0!==a&&(s&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!s&&this.timeline&&this._timeline._remove(this,!0)),!1},v._kill=function(s,a){return this._enabled(!1,!1)},v.kill=function(s,a){return this._kill(s,a),this},v._uncache=function(s){for(var a=s?this:this.timeline;a;)a._dirty=!0,a=a.timeline;return this},v._swapSelfInParams=function(s){for(var a=s.length,o=s.concat();--a>-1;)"{self}"===s[a]&&(o[a]=this);return o},v._callback=function(s){var a=this.vars,o=a[s],r=a[s+"Params"],u=a[s+"Scope"]||a.callbackScope||this;switch(r?r.length:0){case 0:o.call(u);break;case 1:o.call(u,r[0]);break;case 2:o.call(u,r[0],r[1]);break;default:o.apply(u,r)}},v.eventCallback=function(s,a,o,r){if("on"===(s||"").substr(0,2)){var u=this.vars;if(1===arguments.length)return u[s];null==a?delete u[s]:(u[s]=a,u[s+"Params"]=C(o)&&-1!==o.join("").indexOf("{self}")?this._swapSelfInParams(o):o,u[s+"Scope"]=r),"onUpdate"===s&&(this._onUpdate=a)}return this},v.delay=function(s){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+s-this._delay),this._delay=s,this):this._delay},v.duration=function(s){return arguments.length?(this._duration=this._totalDuration=s,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==s&&this.totalTime(this._totalTime*(s/this._duration),!0),this):(this._dirty=!1,this._duration)},v.totalDuration=function(s){return this._dirty=!1,arguments.length?this.duration(s):this._totalDuration},v.time=function(s,a){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(s>this._duration?this._duration:s,a)):this._time},v.totalTime=function(s,a,o){if(b||d.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(s<0&&!o&&(s+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,u=this._timeline;if(s>r&&!o&&(s=r),this._startTime=(this._paused?this._pauseTime:u._time)-(this._reversed?r-s:s)/this._timeScale,u._dirty||this._uncache(!1),u._timeline)for(;u._timeline;)u._timeline._time!==(u._startTime+u._totalTime)/u._timeScale&&u.totalTime(u._totalTime,!0),u=u._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==s||0===this._duration)&&(y.length&&ae(),this.render(s,a,!1),y.length&&ae())}return this},v.progress=v.totalProgress=function(s,a){var o=this.duration();return arguments.length?this.totalTime(o*s,a):o?this._time/o:this.ratio},v.startTime=function(s){return arguments.length?(s!==this._startTime&&(this._startTime=s,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,s-this._delay)),this):this._startTime},v.endTime=function(s){return this._startTime+(0!=s?this.totalDuration():this.duration())/this._timeScale},v.timeScale=function(s){if(!arguments.length)return this._timeScale;var a,o;for(s=s||c,this._timeline&&this._timeline.smoothChildTiming&&(o=(a=this._pauseTime)||0===a?a:this._timeline.totalTime(),this._startTime=o-(o-this._startTime)*this._timeScale/s),this._timeScale=s,o=this.timeline;o&&o.timeline;)o._dirty=!0,o.totalDuration(),o=o.timeline;return this},v.reversed=function(s){return arguments.length?(s!=this._reversed&&(this._reversed=s,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},v.paused=function(s){if(!arguments.length)return this._paused;var o,r,a=this._timeline;return s!=this._paused&&a&&(!b&&!s&&d.wake(),r=(o=a.rawTime())-this._pauseTime,!s&&a.smoothChildTiming&&(this._startTime+=r,this._uncache(!1)),this._pauseTime=s?o:null,this._paused=s,this._active=this.isActive(),!s&&0!==r&&this._initted&&this.duration()&&this.render(o=a.smoothChildTiming?this._totalTime:(o-this._startTime)/this._timeScale,o===this._totalTime,!0)),this._gc&&!s&&this._enabled(!0,!1),this};var _e=W("core.SimpleTimeline",function(s){re.call(this,0,s),this.autoRemoveChildren=this.smoothChildTiming=!0});(v=_e.prototype=new re).constructor=_e,v.kill()._gc=!1,v._first=v._last=v._recent=null,v._sortChildren=!1,v.add=v.insert=function(s,a,o,r){var u,m;if(s._startTime=Number(a||0)+s._delay,s._paused&&this!==s._timeline&&(s._pauseTime=this.rawTime()-(s._timeline.rawTime()-s._pauseTime)),s.timeline&&s.timeline._remove(s,!0),s.timeline=s._timeline=this,s._gc&&s._enabled(!0,!0),u=this._last,this._sortChildren)for(m=s._startTime;u&&u._startTime>m;)u=u._prev;return u?(s._next=u._next,u._next=s):(s._next=this._first,this._first=s),s._next?s._next._prev=s:this._last=s,s._prev=u,this._recent=s,this._timeline&&this._uncache(!0),this},v._remove=function(s,a){return s.timeline===this&&(a||s._enabled(!1,!0),s._prev?s._prev._next=s._next:this._first===s&&(this._first=s._next),s._next?s._next._prev=s._prev:this._last===s&&(this._last=s._prev),s._next=s._prev=s.timeline=null,s===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},v.render=function(s,a,o){var u,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=s;r;)u=r._next,(r._active||s>=r._startTime&&!r._paused&&!r._gc)&&r.render(r._reversed?(r._dirty?r.totalDuration():r._totalDuration)-(s-r._startTime)*r._timeScale:(s-r._startTime)*r._timeScale,a,o),r=u},v.rawTime=function(){return b||d.wake(),this._totalTime};var x=W("TweenLite",function(s,a,o){if(re.call(this,a,o),this.render=x.prototype.render,null==s)throw"Cannot tween a null target.";this.target=s="string"!=typeof s?s:x.selector(s)||s;var m,w,P,r=s.jquery||s.length&&s!==t&&s[0]&&(s[0]===t||s[0].nodeType&&s[0].style&&!s.nodeType),u=this.vars.overwrite;if(this._overwrite=u=null==u?ue[x.defaultOverwrite]:"number"==typeof u?u>>0:ue[u],(r||s instanceof Array||s.push&&C(s))&&"number"!=typeof s[0])for(this._targets=P=g(s),this._propLookup=[],this._siblings=[],m=0;m<P.length;m++)(w=P[m])?"string"!=typeof w?w.length&&w!==t&&w[0]&&(w[0]===t||w[0].nodeType&&w[0].style&&!w.nodeType)?(P.splice(m--,1),this._targets=P=P.concat(g(w))):(this._siblings[m]=de(w,this,!1),1===u&&this._siblings[m].length>1&&Pe(w,this,null,1,this._siblings[m])):"string"==typeof(w=P[m--]=x.selector(w))&&P.splice(m+1,1):P.splice(m--,1);else this._propLookup={},this._siblings=de(s,this,!1),1===u&&this._siblings.length>1&&Pe(s,this,null,1,this._siblings);(this.vars.immediateRender||0===a&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-c,this.render(Math.min(0,-this._delay)))},!0),ye=function(s){return s&&s.length&&s!==t&&s[0]&&(s[0]===t||s[0].nodeType&&s[0].style&&!s.nodeType)};(v=x.prototype=new re).constructor=x,v.kill()._gc=!1,v.ratio=0,v._firstPT=v._targets=v._overwrittenProps=v._startAt=null,v._notifyPluginsOfEnabled=v._lazy=!1,x.version="2.1.3",x.defaultEase=v._ease=new K(null,null,1,1),x.defaultOverwrite="auto",x.ticker=d,x.autoSleep=120,x.lagSmoothing=function(s,a){d.lagSmoothing(s,a)},x.selector=t.$||t.jQuery||function(s){var a=t.$||t.jQuery;return a?(x.selector=a,a(s)):(i||(i=t.document),i?i.querySelectorAll?i.querySelectorAll(s):i.getElementById("#"===s.charAt(0)?s.substr(1):s):s)};var y=[],S={},A=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,_=/[\+-]=-?[\.\d]/,$=function(s){for(var r,a=this._firstPT,o=1e-6;a;)r=a.blob?1===s&&null!=this.end?this.end:s?this.join(""):this.start:a.c*s+a.s,a.m?r=a.m.call(this._tween,r,this._target||a.t,this._tween):r<o&&r>-o&&!a.blob&&(r=0),a.f?a.fp?a.t[a.p](a.fp,r):a.t[a.p](r):a.t[a.p]=r,a=a._next},R=function(s){return(1e3*s|0)/1e3+""},I=function(s,a,o,r){var T,O,L,M,Z,V,oe,u=[],m=0,w="",P=0;for(u.start=s,u.end=a,s=u[0]=s+"",a=u[1]=a+"",o&&(o(u),s=u[0],a=u[1]),u.length=0,T=s.match(A)||[],O=a.match(A)||[],r&&(r._next=null,r.blob=1,u._firstPT=u._applyPT=r),Z=O.length,M=0;M<Z;M++)w+=(V=a.substr(m,a.indexOf(oe=O[M],m)-m))||!M?V:",",m+=V.length,P?P=(P+1)%5:"rgba("===V.substr(-5)&&(P=1),oe===T[M]||T.length<=M?w+=oe:(w&&(u.push(w),w=""),L=parseFloat(T[M]),u.push(L),u._firstPT={_next:u._firstPT,t:u,p:u.length-1,s:L,c:("="===oe.charAt(1)?parseInt(oe.charAt(0)+"1",10)*parseFloat(oe.substr(2)):parseFloat(oe)-L)||0,f:0,m:P&&P<4?Math.round:R}),m+=oe.length;return(w+=a.substr(m))&&u.push(w),u.setRatio=$,_.test(a)&&(u.end=null),u},D=function(s,a,o,r,u,m,w,P,T){"function"==typeof r&&(r=r(T||0,s));var O=typeof s[a],L="function"!==O?"":a.indexOf("set")||"function"!=typeof s["get"+a.substr(3)]?a:"get"+a.substr(3),M="get"!==o?o:L?w?s[L](w):s[L]():s[a],Z="string"==typeof r&&"="===r.charAt(1),V={t:s,p:a,s:M,f:"function"===O,pg:0,n:u||a,m:m?"function"==typeof m?m:Math.round:0,pr:0,c:Z?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-M||0};if(("number"!=typeof M||"number"!=typeof r&&!Z)&&(w||isNaN(M)||!Z&&isNaN(r)||"boolean"==typeof M||"boolean"==typeof r?(V.fp=w,V={t:I(M,Z?parseFloat(V.s)+V.c+(V.s+"").replace(/[0-9\-\.]/g,""):r,P||x.defaultStringFilter,V),p:"setRatio",s:0,c:1,f:2,pg:0,n:u||a,pr:0,m:0}):(V.s=parseFloat(M),Z||(V.c=parseFloat(r)-V.s||0))),V.c)return(V._next=this._firstPT)&&(V._next._prev=V),this._firstPT=V,V},G=x._internals={isArray:C,isSelector:ye,lazyTweens:y,blobDif:I},N=x._plugins={},Q=G.tweenLookup={},fe=0,ie=G.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},ue={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},se=re._rootFramesTimeline=new _e,J=re._rootTimeline=new _e,ve=30,ae=G.lazyRender=function(){var a,o,s=y.length;for(S={},a=0;a<s;a++)(o=y[a])&&!1!==o._lazy&&(o.render(o._lazy[0],o._lazy[1],!0),o._lazy=!1);y.length=0};J._startTime=d.time,se._startTime=d.frame,J._active=se._active=!0,setTimeout(ae,1),re._updateRoot=x.render=function(){var s,a,o;if(y.length&&ae(),J.render((d.time-J._startTime)*J._timeScale,!1,!1),se.render((d.frame-se._startTime)*se._timeScale,!1,!1),y.length&&ae(),d.frame>=ve){for(o in ve=d.frame+(parseInt(x.autoSleep,10)||120),Q){for(s=(a=Q[o].tweens).length;--s>-1;)a[s]._gc&&a.splice(s,1);0===a.length&&delete Q[o]}if((!(o=J._first)||o._paused)&&x.autoSleep&&!se._first&&1===d._listeners.tick.length){for(;o&&o._paused;)o=o._next;o||d.sleep()}}},d.addEventListener("tick",re._updateRoot);var de=function(s,a,o){var u,m,r=s._gsTweenID;if(Q[r||(s._gsTweenID=r="t"+fe++)]||(Q[r]={target:s,tweens:[]}),a&&((u=Q[r].tweens)[m=u.length]=a,o))for(;--m>-1;)u[m]===a&&u.splice(m,1);return Q[r].tweens},be=function(s,a,o,r){var m,w,u=s.vars.onOverwrite;return u&&(m=u(s,a,o,r)),(u=x.onOverwrite)&&(w=u(s,a,o,r)),!1!==m&&!1!==w},Pe=function(s,a,o,r,u){var m,w,P,T;if(1===r||r>=4){for(T=u.length,m=0;m<T;m++)if((P=u[m])!==a)P._gc||P._kill(null,s,a)&&(w=!0);else if(5===r)break;return w}var V,O=a._startTime+c,L=[],M=0,Z=0===a._duration;for(m=u.length;--m>-1;)(P=u[m])===a||P._gc||P._paused||(P._timeline!==a._timeline?(V=V||Se(a,0,Z),0===Se(P,V,Z)&&(L[M++]=P)):P._startTime<=O&&P._startTime+P.totalDuration()/P._timeScale>O&&((Z||!P._initted)&&O-P._startTime<=2*c||(L[M++]=P)));for(m=M;--m>-1;)if(T=(P=L[m])._firstPT,2===r&&P._kill(o,s,a)&&(w=!0),2!==r||!P._firstPT&&P._initted&&T){if(2!==r&&!be(P,a))continue;P._enabled(!1,!1)&&(w=!0)}return w},Se=function(s,a,o){for(var r=s._timeline,u=r._timeScale,m=s._startTime;r._timeline;){if(m+=r._startTime,u*=r._timeScale,r._paused)return-100;r=r._timeline}return(m/=u)>a?m-a:o&&m===a||!s._initted&&m-a<2*c?c:(m+=s.totalDuration()/s._timeScale/u)>a+c?0:m-a-c};v._init=function(){var w,P,T,O,L,M,s=this.vars,a=this._overwrittenProps,o=this._duration,r=!!s.immediateRender,u=s.ease,m=this._startAt;if(s.startAt){for(O in m&&(m.render(-1,!0),m.kill()),L={},s.startAt)L[O]=s.startAt[O];if(L.data="isStart",L.overwrite=!1,L.immediateRender=!0,L.lazy=r&&!1!==s.lazy,L.startAt=L.delay=null,L.onUpdate=s.onUpdate,L.onUpdateParams=s.onUpdateParams,L.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=x.to(this.target||{},0,L),r)if(this._time>0)this._startAt=null;else if(0!==o)return}else if(s.runBackwards&&0!==o)if(m)m.render(-1,!0),m.kill(),this._startAt=null;else{for(O in 0!==this._time&&(r=!1),T={},s)(!ie[O]||"autoCSS"===O)&&(T[O]=s[O]);if(T.overwrite=0,T.data="isFromStart",T.lazy=r&&!1!==s.lazy,T.immediateRender=r,this._startAt=x.to(this.target,0,T),r){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=u=u?u instanceof K?u:"function"==typeof u?new K(u,s.easeParams):F[u]||x.defaultEase:x.defaultEase,s.easeParams instanceof Array&&u.config&&(this._ease=u.config.apply(u,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(M=this._targets.length,w=0;w<M;w++)this._initProps(this._targets[w],this._propLookup[w]={},this._siblings[w],a?a[w]:null,w)&&(P=!0);else P=this._initProps(this.target,this._propLookup,this._siblings,a,0);if(P&&x._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(T=this._firstPT;T;)T.s+=T.c,T.c=-T.c,T=T._next;this._onUpdate=s.onUpdate,this._initted=!0},v._initProps=function(s,a,o,r,u){var m,w,P,T,O,L;if(null==s)return!1;for(m in S[s._gsTweenID]&&ae(),this.vars.css||s.style&&s!==t&&s.nodeType&&N.css&&!1!==this.vars.autoCSS&&function(s,a){var r,o={};for(r in s)!ie[r]&&(!(r in a)||"transform"===r||"x"===r||"y"===r||"width"===r||"height"===r||"className"===r||"border"===r)&&(!N[r]||N[r]&&N[r]._autoCSS)&&(o[r]=s[r],delete s[r]);s.css=o}(this.vars,s),this.vars)if(L=this.vars[m],ie[m])L&&(L instanceof Array||L.push&&C(L))&&-1!==L.join("").indexOf("{self}")&&(this.vars[m]=L=this._swapSelfInParams(L,this));else if(N[m]&&(T=new N[m])._onInitTween(s,this.vars[m],this,u)){for(this._firstPT=O={_next:this._firstPT,t:T,p:"setRatio",s:0,c:1,f:1,n:m,pg:1,pr:T._priority,m:0},w=T._overwriteProps.length;--w>-1;)a[T._overwriteProps[w]]=this._firstPT;(T._priority||T._onInitAllProps)&&(P=!0),(T._onDisable||T._onEnable)&&(this._notifyPluginsOfEnabled=!0),O._next&&(O._next._prev=O)}else a[m]=D.call(this,s,m,"get",L,m,0,null,this.vars.stringFilter,u);return r&&this._kill(r,s)?this._initProps(s,a,o,r,u):this._overwrite>1&&this._firstPT&&o.length>1&&Pe(s,this,a,this._overwrite,o)?(this._kill(a,s),this._initProps(s,a,o,r,u)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(S[s._gsTweenID]=!0),P)},v.render=function(s,a,o){var P,T,O,L,r=this,u=r._time,m=r._duration,w=r._rawPrevTime;if(s>=m-c&&s>=0)r._totalTime=r._time=m,r.ratio=r._ease._calcEnd?r._ease.getRatio(1):1,r._reversed||(P=!0,T="onComplete",o=o||r._timeline.autoRemoveChildren),0===m&&(r._initted||!r.vars.lazy||o)&&(r._startTime===r._timeline._duration&&(s=0),(w<0||s<=0&&s>=-c||w===c&&"isPause"!==r.data)&&w!==s&&(o=!0,w>c&&(T="onReverseComplete")),r._rawPrevTime=L=!a||s||w===s?s:c);else if(s<c)r._totalTime=r._time=0,r.ratio=r._ease._calcEnd?r._ease.getRatio(0):0,(0!==u||0===m&&w>0)&&(T="onReverseComplete",P=r._reversed),s>-c?s=0:s<0&&(r._active=!1,0===m&&(r._initted||!r.vars.lazy||o)&&(w>=0&&!(w===c&&"isPause"===r.data)&&(o=!0),r._rawPrevTime=L=!a||s||w===s?s:c)),(!r._initted||r._startAt&&r._startAt.progress())&&(o=!0);else if(r._totalTime=r._time=s,r._easeType){var M=s/m,Z=r._easeType,V=r._easePower;(1===Z||3===Z&&M>=.5)&&(M=1-M),3===Z&&(M*=2),1===V?M*=M:2===V?M*=M*M:3===V?M*=M*M*M:4===V&&(M*=M*M*M*M),r.ratio=1===Z?1-M:2===Z?M:s/m<.5?M/2:1-M/2}else r.ratio=r._ease.getRatio(s/m);if(r._time!==u||o){if(!r._initted){if(r._init(),!r._initted||r._gc)return;if(!o&&r._firstPT&&(!1!==r.vars.lazy&&r._duration||r.vars.lazy&&!r._duration))return r._time=r._totalTime=u,r._rawPrevTime=w,y.push(r),void(r._lazy=[s,a]);r._time&&!P?r.ratio=r._ease.getRatio(r._time/m):P&&r._ease._calcEnd&&(r.ratio=r._ease.getRatio(0===r._time?0:1))}for(!1!==r._lazy&&(r._lazy=!1),r._active||!r._paused&&r._time!==u&&s>=0&&(r._active=!0),0===u&&(r._startAt&&(s>=0?r._startAt.render(s,!0,o):T||(T="_dummyGS")),r.vars.onStart&&(0!==r._time||0===m)&&(a||r._callback("onStart"))),O=r._firstPT;O;)O.f?O.t[O.p](O.c*r.ratio+O.s):O.t[O.p]=O.c*r.ratio+O.s,O=O._next;r._onUpdate&&(s<0&&r._startAt&&-1e-4!==s&&r._startAt.render(s,!0,o),a||(r._time!==u||P||o)&&r._callback("onUpdate")),T&&(!r._gc||o)&&(s<0&&r._startAt&&!r._onUpdate&&-1e-4!==s&&r._startAt.render(s,!0,o),P&&(r._timeline.autoRemoveChildren&&r._enabled(!1,!1),r._active=!1),!a&&r.vars[T]&&r._callback(T),0===m&&r._rawPrevTime===c&&L!==c&&(r._rawPrevTime=0))}},v._kill=function(s,a,o){if("all"===s&&(s=null),null==s&&(null==a||a===this.target))return this._lazy=!1,this._enabled(!1,!1);a="string"!=typeof a?a||this._targets||this.target:x.selector(a)||a;var m,w,P,T,O,L,M,Z,V,r=o&&this._time&&o._startTime===this._startTime&&this._timeline===o._timeline,u=this._firstPT;if((C(a)||ye(a))&&"number"!=typeof a[0])for(m=a.length;--m>-1;)this._kill(s,a[m],o)&&(L=!0);else{if(this._targets){for(m=this._targets.length;--m>-1;)if(a===this._targets[m]){O=this._propLookup[m]||{},this._overwrittenProps=this._overwrittenProps||[],w=this._overwrittenProps[m]=s?this._overwrittenProps[m]||{}:"all";break}}else{if(a!==this.target)return!1;O=this._propLookup,w=this._overwrittenProps=s?this._overwrittenProps||{}:"all"}if(O){if(M=s||O,Z=s!==w&&"all"!==w&&s!==O&&("object"!=typeof s||!s._tempKill),o&&(x.onOverwrite||this.vars.onOverwrite)){for(P in M)O[P]&&(V||(V=[]),V.push(P));if((V||!s)&&!be(this,o,a,V))return!1}for(P in M)(T=O[P])&&(r&&(T.f?T.t[T.p](T.s):T.t[T.p]=T.s,L=!0),T.pg&&T.t._kill(M)&&(L=!0),(!T.pg||0===T.t._overwriteProps.length)&&(T._prev?T._prev._next=T._next:T===this._firstPT&&(this._firstPT=T._next),T._next&&(T._next._prev=T._prev),T._next=T._prev=null),delete O[P]),Z&&(w[P]=1);!this._firstPT&&this._initted&&u&&this._enabled(!1,!1)}}return L},v.invalidate=function(){this._notifyPluginsOfEnabled&&x._onPluginEvent("_onDisable",this);var s=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],re.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-c,this.render(s,!1,!1!==this.vars.lazy)),this},v._enabled=function(s,a){if(b||d.wake(),s&&this._gc){var r,o=this._targets;if(o)for(r=o.length;--r>-1;)this._siblings[r]=de(o[r],this,!0);else this._siblings=de(this.target,this,!0)}return re.prototype._enabled.call(this,s,a),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&x._onPluginEvent(s?"_onEnable":"_onDisable",this)},x.to=function(s,a,o){return new x(s,a,o)},x.from=function(s,a,o){return o.runBackwards=!0,o.immediateRender=0!=o.immediateRender,new x(s,a,o)},x.fromTo=function(s,a,o,r){return r.startAt=o,r.immediateRender=0!=r.immediateRender&&0!=o.immediateRender,new x(s,a,r)},x.delayedCall=function(s,a,o,r,u){return new x(a,0,{delay:s,onComplete:a,onCompleteParams:o,callbackScope:r,onReverseComplete:a,onReverseCompleteParams:o,immediateRender:!1,lazy:!1,useFrames:u,overwrite:0})},x.set=function(s,a){return new x(s,0,a)},x.getTweensOf=function(s,a){if(null==s)return[];var o,r,u,m;if(s="string"!=typeof s?s:x.selector(s)||s,(C(s)||ye(s))&&"number"!=typeof s[0]){for(o=s.length,r=[];--o>-1;)r=r.concat(x.getTweensOf(s[o],a));for(o=r.length;--o>-1;)for(m=r[o],u=o;--u>-1;)m===r[u]&&r.splice(o,1)}else if(s._gsTweenID)for(o=(r=de(s).concat()).length;--o>-1;)(r[o]._gc||a&&!r[o].isActive())&&r.splice(o,1);return r||[]},x.killTweensOf=x.killDelayedCallsTo=function(s,a,o){"object"==typeof a&&(o=a,a=!1);for(var r=x.getTweensOf(s,a),u=r.length;--u>-1;)r[u]._kill(o,s)};var ce=W("plugins.TweenPlugin",function(s,a){this._overwriteProps=(s||"").split(","),this._propName=this._overwriteProps[0],this._priority=a||0,this._super=ce.prototype},!0);if(v=ce.prototype,ce.version="1.19.0",ce.API=2,v._firstPT=null,v._addTween=D,v.setRatio=$,v._kill=function(s){var r,a=this._overwriteProps,o=this._firstPT;if(null!=s[this._propName])this._overwriteProps=[];else for(r=a.length;--r>-1;)null!=s[a[r]]&&a.splice(r,1);for(;o;)null!=s[o.n]&&(o._next&&(o._next._prev=o._prev),o._prev?(o._prev._next=o._next,o._prev=null):this._firstPT===o&&(this._firstPT=o._next)),o=o._next;return!1},v._mod=v._roundProps=function(s){for(var o,a=this._firstPT;a;)(o=s[this._propName]||null!=a.n&&s[a.n.split(this._propName+"_").join("")])&&"function"==typeof o&&(2===a.f?a.t._applyPT.m=o:a.m=o),a=a._next},x._onPluginEvent=function(s,a){var r,u,m,w,P,o=a._firstPT;if("_onInitAllProps"===s){for(;o;){for(P=o._next,u=m;u&&u.pr>o.pr;)u=u._next;(o._prev=u?u._prev:w)?o._prev._next=o:m=o,(o._next=u)?u._prev=o:w=o,o=P}o=a._firstPT=m}for(;o;)o.pg&&"function"==typeof o.t[s]&&o.t[s]()&&(r=!0),o=o._next;return r},ce.activate=function(s){for(var a=s.length;--a>-1;)s[a].API===ce.API&&(N[(new s[a])._propName]=s[a]);return!0},k.plugin=function(s){if(!(s&&s.propName&&s.init&&s.API))throw"illegal plugin definition.";var P,a=s.propName,o=s.priority||0,r=s.overwriteProps,u={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},m=W("plugins."+a.charAt(0).toUpperCase()+a.substr(1)+"Plugin",function(){ce.call(this,a,o),this._overwriteProps=r||[]},!0===s.global),w=m.prototype=new ce(a);for(P in w.constructor=m,m.API=s.API,u)"function"==typeof s[P]&&(w[u[P]]=s[P]);return m.version=s.version,ce.activate([m]),m},z=t._gsQueue){for(Y=0;Y<z.length;Y++)z[Y]();for(v in p)p[v].func||t.console.log("GSAP encountered missing dependency: "+v)}return b=!1,x}(ht),xe=ht.GreenSockGlobals,ft=xe.com.greensock,Ut=ft.core.SimpleTimeline,ke=ft.core.Animation,We=xe.Ease;ht._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(){var t=function(d){var f,b=[],p=d.length;for(f=0;f!==p;b.push(d[f++]));return b},e=function(d,b,p){var k,W,f=d.cycle;for(k in f)d[k]="function"==typeof(W=f[k])?W(p,b[p],b):W[p%W.length];delete d.cycle},i=function(d){if("function"==typeof d)return d;var b="object"==typeof d?d:{each:d},p=b.ease,f=b.from||0,k=b.base||0,W={},B=isNaN(f),K=b.axis,F={center:.5,end:1}[f]||0;return function(H,te,X){var j,re,le,_e,x,ye,Te,y,S,U=(X||b).length,q=W[U];if(!q){if(!(S="auto"===b.grid?0:(b.grid||[1/0])[0])){for(Te=-1/0;Te<(Te=X[S++].getBoundingClientRect().left)&&S<U;);S--}for(q=W[U]=[],j=B?Math.min(S,U)*F-.5:f%S,re=B?U*F/S-.5:f/S|0,Te=0,y=1/0,ye=0;ye<U;ye++)le=ye%S-j,_e=re-(ye/S|0),q[ye]=x=K?Math.abs("y"===K?_e:le):Math.sqrt(le*le+_e*_e),x>Te&&(Te=x),x<y&&(y=x);q.max=Te-y,q.min=y,q.v=U=b.amount||b.each*(S>U?U-1:K?"y"===K?U/S:S:Math.max(S,U/S))||0,q.b=U<0?k-U:k}return U=(q[H]-q.min)/q.max,q.b+(p?p.getRatio(U):U)*q.v}},n=function(d,b,p){me.call(this,d,b,p),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=n.prototype.render},l=1e-8,h=me._internals,c=h.isSelector,g=h.isArray,E=n.prototype=me.to({},.1,{}),C=[];n.version="2.1.3",E.constructor=n,E.kill()._gc=!1,n.killTweensOf=n.killDelayedCallsTo=me.killTweensOf,n.getTweensOf=me.getTweensOf,n.lagSmoothing=me.lagSmoothing,n.ticker=me.ticker,n.render=me.render,n.distribute=i,E.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),me.prototype.invalidate.call(this)},E.updateTo=function(d,b){var W,p=this,f=p.ratio,k=p.vars.immediateRender||d.immediateRender;for(W in b&&p._startTime<p._timeline._time&&(p._startTime=p._timeline._time,p._uncache(!1),p._gc?p._enabled(!0,!1):p._timeline.insert(p,p._startTime-p._delay)),d)p.vars[W]=d[W];if(p._initted||k)if(b)p._initted=!1,k&&p.render(0,!0,!0);else if(p._gc&&p._enabled(!0,!1),p._notifyPluginsOfEnabled&&p._firstPT&&me._onPluginEvent("_onDisable",p),p._time/p._duration>.998){var B=p._totalTime;p.render(0,!0,!1),p._initted=!1,p.render(B,!0,!1)}else if(p._initted=!1,p._init(),p._time>0||k)for(var H,K=1/(1-f),F=p._firstPT;F;)H=F.s+F.c,F.c*=K,F.s=H-F.c,F=F._next;return p},E.render=function(d,b,p){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var te,X,U,q,j,re,le,_e,x,f=this,k=f._dirty?f.totalDuration():f._totalDuration,W=f._time,B=f._totalTime,K=f._cycle,F=f._duration,H=f._rawPrevTime;if(d>=k-l&&d>=0?(f._totalTime=k,f._cycle=f._repeat,f._yoyo&&0!=(1&f._cycle)?(f._time=0,f.ratio=f._ease._calcEnd?f._ease.getRatio(0):0):(f._time=F,f.ratio=f._ease._calcEnd?f._ease.getRatio(1):1),f._reversed||(te=!0,X="onComplete",p=p||f._timeline.autoRemoveChildren),0===F&&(f._initted||!f.vars.lazy||p)&&(f._startTime===f._timeline._duration&&(d=0),(H<0||d<=0&&d>=-l||H===l&&"isPause"!==f.data)&&H!==d&&(p=!0,H>l&&(X="onReverseComplete")),f._rawPrevTime=_e=!b||d||H===d?d:l)):d<l?(f._totalTime=f._time=f._cycle=0,f.ratio=f._ease._calcEnd?f._ease.getRatio(0):0,(0!==B||0===F&&H>0)&&(X="onReverseComplete",te=f._reversed),d>-l?d=0:d<0&&(f._active=!1,0===F&&(f._initted||!f.vars.lazy||p)&&(H>=0&&(p=!0),f._rawPrevTime=_e=!b||d||H===d?d:l)),f._initted||(p=!0)):(f._totalTime=f._time=d,0!==f._repeat&&(f._cycle=f._totalTime/(q=F+f._repeatDelay)>>0,0!==f._cycle&&f._cycle===f._totalTime/q&&B<=d&&f._cycle--,f._time=f._totalTime-f._cycle*q,f._yoyo&&0!=(1&f._cycle)&&(f._time=F-f._time,(x=f._yoyoEase||f.vars.yoyoEase)&&(f._yoyoEase||(f._yoyoEase=x=!0!==x||f._initted?!0===x?f._ease:x instanceof We?x:We.map[x]:(x=f.vars.ease)?x instanceof We?x:"function"==typeof x?new We(x,f.vars.easeParams):We.map[x]||me.defaultEase:me.defaultEase),f.ratio=x?1-x.getRatio((F-f._time)/F):0)),f._time>F?f._time=F:f._time<0&&(f._time=0)),f._easeType&&!x?(j=f._time/F,(1===(re=f._easeType)||3===re&&j>=.5)&&(j=1-j),3===re&&(j*=2),1===(le=f._easePower)?j*=j:2===le?j*=j*j:3===le?j*=j*j*j:4===le&&(j*=j*j*j*j),f.ratio=1===re?1-j:2===re?j:f._time/F<.5?j/2:1-j/2):x||(f.ratio=f._ease.getRatio(f._time/F))),W!==f._time||p||K!==f._cycle){if(!f._initted){if(f._init(),!f._initted||f._gc)return;if(!p&&f._firstPT&&(!1!==f.vars.lazy&&f._duration||f.vars.lazy&&!f._duration))return f._time=W,f._totalTime=B,f._rawPrevTime=H,f._cycle=K,h.lazyTweens.push(f),void(f._lazy=[d,b]);!f._time||te||x?te&&this._ease._calcEnd&&!x&&(f.ratio=f._ease.getRatio(0===f._time?0:1)):f.ratio=f._ease.getRatio(f._time/F)}for(!1!==f._lazy&&(f._lazy=!1),f._active||!f._paused&&f._time!==W&&d>=0&&(f._active=!0),0===B&&(2===f._initted&&d>0&&f._init(),f._startAt&&(d>=0?f._startAt.render(d,!0,p):X||(X="_dummyGS")),f.vars.onStart&&(0!==f._totalTime||0===F)&&(b||f._callback("onStart"))),U=f._firstPT;U;)U.f?U.t[U.p](U.c*f.ratio+U.s):U.t[U.p]=U.c*f.ratio+U.s,U=U._next;f._onUpdate&&(d<0&&f._startAt&&f._startTime&&f._startAt.render(d,!0,p),b||(f._totalTime!==B||X)&&f._callback("onUpdate")),f._cycle!==K&&(b||f._gc||f.vars.onRepeat&&f._callback("onRepeat")),X&&(!f._gc||p)&&(d<0&&f._startAt&&!f._onUpdate&&f._startTime&&f._startAt.render(d,!0,p),te&&(f._timeline.autoRemoveChildren&&f._enabled(!1,!1),f._active=!1),!b&&f.vars[X]&&f._callback(X),0===F&&f._rawPrevTime===l&&_e!==l&&(f._rawPrevTime=0))}else B!==f._totalTime&&f._onUpdate&&(b||f._callback("onUpdate"))},n.to=function(d,b,p){return new n(d,b,p)},n.from=function(d,b,p){return p.runBackwards=!0,p.immediateRender=0!=p.immediateRender,new n(d,b,p)},n.fromTo=function(d,b,p,f){return f.startAt=p,f.immediateRender=0!=f.immediateRender&&0!=p.immediateRender,new n(d,b,f)},n.staggerTo=n.allTo=function(d,b,p,f,k,W,B){var X,U,q,j,K=[],F=i(p.stagger||f),H=p.cycle,te=(p.startAt||C).cycle;for(g(d)||("string"==typeof d&&(d=me.selector(d)||d),c(d)&&(d=t(d))),X=(d=d||[]).length-1,q=0;q<=X;q++){for(j in U={},p)U[j]=p[j];if(H&&(e(U,d,q),null!=U.duration&&(b=U.duration,delete U.duration)),te){for(j in te=U.startAt={},p.startAt)te[j]=p.startAt[j];e(U.startAt,d,q)}U.delay=F(q,d[q],d)+(U.delay||0),q===X&&k&&(U.onComplete=function(){p.onComplete&&p.onComplete.apply(p.onCompleteScope||this,arguments),k.apply(B||p.callbackScope||this,W||C)}),K[q]=new n(d[q],b,U)}return K},n.staggerFrom=n.allFrom=function(d,b,p,f,k,W,B){return p.runBackwards=!0,p.immediateRender=0!=p.immediateRender,n.staggerTo(d,b,p,f,k,W,B)},n.staggerFromTo=n.allFromTo=function(d,b,p,f,k,W,B,K){return f.startAt=p,f.immediateRender=0!=f.immediateRender&&0!=p.immediateRender,n.staggerTo(d,b,f,k,W,B,K)},n.delayedCall=function(d,b,p,f,k){return new n(b,0,{delay:d,onComplete:b,onCompleteParams:p,callbackScope:f,onReverseComplete:b,onReverseCompleteParams:p,immediateRender:!1,useFrames:k,overwrite:0})},n.set=function(d,b){return new n(d,0,b)},n.isTweening=function(d){return me.getTweensOf(d,!0).length>0};var z=function(d,b){for(var p=[],f=0,k=d._first;k;)k instanceof me?p[f++]=k:(b&&(p[f++]=k),f=(p=p.concat(z(k,b))).length),k=k._next;return p},Y=n.getAllTweens=function(d){return z(ke._rootTimeline,d).concat(z(ke._rootFramesTimeline,d))};n.killAll=function(d,b,p,f){null==b&&(b=!0),null==p&&(p=!0);var K,F,H,k=Y(0!=f),W=k.length,B=b&&p&&f;for(H=0;H<W;H++)F=k[H],(B||F instanceof Ut||(K=F.target===F.vars.onComplete)&&p||b&&!K)&&(d?F.totalTime(F._reversed?0:F.totalDuration()):F._enabled(!1,!1))},n.killChildTweensOf=function(d,b){if(null!=d){var f,k,W,B,K,p=h.tweenLookup;if("string"==typeof d&&(d=me.selector(d)||d),c(d)&&(d=t(d)),g(d)){for(B=d.length;--B>-1;)n.killChildTweensOf(d[B],b);return}for(W in f=[],p)for(k=p[W].target.parentNode;k;)k===d&&(f=f.concat(p[W].tweens)),k=k.parentNode;for(K=f.length,B=0;B<K;B++)b&&f[B].totalTime(f[B].totalDuration()),f[B]._enabled(!1,!1)}};var v=function(d,b,p,f){b=!1!==b,p=!1!==p;for(var K,F,k=Y(f=!1!==f),W=b&&p&&f,B=k.length;--B>-1;)F=k[B],(W||F instanceof Ut||(K=F.target===F.vars.onComplete)&&p||b&&!K)&&F.paused(d)};return n.pauseAll=function(d,b,p){v(!0,d,b,p)},n.resumeAll=function(d,b,p){v(!1,d,b,p)},n.globalTimeScale=function(d){var b=ke._rootTimeline,p=me.ticker.time;return arguments.length?(b._startTime=p-(p-b._startTime)*b._timeScale/(d=d||l),(b=ke._rootFramesTimeline)._startTime=(p=me.ticker.frame)-(p-b._startTime)*b._timeScale/d,b._timeScale=ke._rootTimeline._timeScale=d,d):b._timeScale},E.progress=function(d,b){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-d:d)+this._cycle*(this._duration+this._repeatDelay),b):this.duration()?this._time/this._duration:this.ratio},E.totalProgress=function(d,b){return arguments.length?this.totalTime(this.totalDuration()*d,b):this._totalTime/this.totalDuration()},E.time=function(d,b){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var p=this._duration,f=this._cycle,k=f*(p+this._repeatDelay);return d>p&&(d=p),this.totalTime(this._yoyo&&1&f?p-d+k:this._repeat?d+k:d,b)},E.duration=function(d){return arguments.length?ke.prototype.duration.call(this,d):this._duration},E.totalDuration=function(d){return arguments.length?-1===this._repeat?this:this.duration((d-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},E.repeat=function(d){return arguments.length?(this._repeat=d,this._uncache(!0)):this._repeat},E.repeatDelay=function(d){return arguments.length?(this._repeatDelay=d,this._uncache(!0)):this._repeatDelay},E.yoyo=function(d){return arguments.length?(this._yoyo=d,this):this._yoyo},n},!0);var Ta=xe.TweenMax,Pa={models:"weboji",enabled:!1,tags:["browser"],$pointer:null,pointer:{x:-20,y:-20},tween:{x:0,y:0,positionList:[]},config:{offset:{x:0,y:0,pitch:10,yaw:0,roll:0},speed:{x:1,y:1}},onEnable(){var t;if(!this.$pointer){const e=document.createElement("div");e.classList.add("handsfree-pointer","handsfree-pointer-face","handsfree-hide-when-started-without-weboji"),document.body.appendChild(e),this.$pointer=e}null===(t=this.$pointer)||void 0===t||t.classList.remove("handsfree-hidden")},onFrame({weboji:t}){let e=t.translation[0]*window.outerWidth,i=window.outerHeight-t.translation[1]*window.outerHeight,n=(1-t.translation[2])*window.outerWidth*2.5;e+=n*Math.tan(t.rotation[1]+this.config.offset.yaw*Math.PI/180)*this.config.speed.x,i+=n*Math.tan(t.rotation[0]+this.config.offset.pitch*Math.PI/180)*this.config.speed.y-window.outerHeight,e+=this.config.offset.x,i+=this.config.offset.y,this.handsfree.TweenMax.to(this.tween,1,{x:e,y:i,overwrite:!0,ease:"linear.easeNone",immediateRender:!0}),this.$pointer.style.left=`${this.tween.x}px`,this.$pointer.style.top=`${this.tween.y}px`,t.pointer={x:this.tween.x,y:this.tween.y}},onDisable(){var t;null===(t=this.$pointer)||void 0===t||t.classList.add("handsfree-hidden")}},Sa={models:"weboji",enabled:!1,tags:["browser"],config:{throttle:50,maxMouseDownedFrames:1,morphs:{0:.25,1:.25}},mouseDowned:0,mouseUp:!1,thresholdMet:!1,lastHeld:{x:0,y:0},$origTarget:null,onFrame({weboji:t}){this.thresholdMet=!1;let e="";Object.keys(this.config.morphs).forEach(n=>{const l=+this.config.morphs[n];l>0&&t.morphs[n]>=l&&(this.thresholdMet=!0)}),this.thresholdMet?(this.mouseDowned++,document.body.classList.add("handsfree-clicked")):(this.mouseUp=this.mouseDowned,this.mouseDowned=0,document.body.classList.remove("handsfree-clicked")),e=this.mouseDowned>0&&this.mouseDowned<=this.config.maxMouseDownedFrames?t.pointer.state="mousedown":this.mouseDowned>this.config.maxMouseDownedFrames?t.pointer.state="mousedrag":this.mouseUp?t.pointer.state="mouseup":"mousemove";const i=document.elementFromPoint(t.pointer.x,t.pointer.y);if(i&&"mousedown"===e&&(this.$origTarget=i),i){const n={view:window,button:0,bubbles:!0,cancelable:!0,clientX:t.pointer.x,clientY:t.pointer.y,movementX:t.pointer.x-this.lastHeld.x,movementY:t.pointer.y-this.lastHeld.y};i.dispatchEvent(new MouseEvent(e,n)),"mousedown"===t.pointer.state&&["INPUT","TEXTAREA","BUTTON","A"].includes(i.nodeName)&&i.focus(),"mouseup"===t.pointer.state&&i===this.$origTarget&&i.dispatchEvent(new MouseEvent("click",n)),t.pointer.$target=i}this.lastHeld=t.pointer}},Ea={models:"weboji",enabled:!1,tags:["browser"],numFramesFocused:0,$lastTarget:null,$target:null,config:{framesToFocus:10,vertScroll:{scrollSpeed:.05,scrollZone:100}},onUse(){this.$target=window},onFrame({weboji:t}){if(!t.pointer.x&&!t.pointer.y)return;this.checkForFocus(t);let i,e=!1,n=this.getTargetScrollTop();i=this.$target.getBoundingClientRect?this.$target.getBoundingClientRect():{top:0,bottom:window.innerHeight},"mouseDown"===t.pointer.state&&(this.numFramesFocused=0,this.maybeSetTarget(t)),t.pointer.y<i.top+this.config.vertScroll.scrollZone&&(this.$target.scrollTo(0,n+(t.pointer.y-i.top-this.config.vertScroll.scrollZone)*this.config.vertScroll.scrollSpeed),e=!0),t.pointer.y>i.bottom-this.config.vertScroll.scrollZone&&(this.$target.scrollTo(0,n-(i.bottom-t.pointer.y-this.config.vertScroll.scrollZone)*this.config.vertScroll.scrollSpeed),e=!0),e&&this.maybeSelectNewTarget()},maybeSelectNewTarget(){let t=this.getTargetScrollTop(),e=!1;this.$target.scrollTo(0,t+this.config.vertScroll.scrollSpeed),t===this.getTargetScrollTop()?(e=!0,this.$target.scrollTo(0,t-this.config.vertScroll.scrollSpeed),t===this.getTargetScrollTop()?e&&(this.numFramesFocused=0,this.selectTarget(this.recursivelyFindScrollbar(this.$target.parentElement))):this.$target.scrollTo(0,t+this.config.vertScroll.scrollSpeed)):this.$target.scrollTo(0,t-this.config.vertScroll.scrollSpeed)},getTargetScrollTop(){var t,e;return(null===(t=this.$target)||void 0===t?void 0:t.scrollY)||(null===(e=this.$target)||void 0===e?void 0:e.scrollTop)||0},checkForFocus:kt(function(t){let e=document.elementFromPoint(t.pointer.x,t.pointer.y);!e||(e=this.recursivelyFindScrollbar(e),e===this.$lastTarget?++this.numFramesFocused:this.numFramesFocused=0,this.numFramesFocused>this.config.framesToFocus&&this.selectTarget(e),this.$lastTarget=e)},100),selectTarget(t){this.$target.classList&&this.$target.classList.remove("handsfree-scroll-focus"),t&&t.classList&&t.classList.add("handsfree-scroll-focus"),("HTML"===t.nodeName||!t.nodeName)&&(t=window),this.$target=t},maybeSetTarget(t){"mouseDown"===t.pointer.state&&t.pointer.$target&&this.selectTarget(this.recursivelyFindScrollbar(t.pointer.$target))},recursivelyFindScrollbar(t){const e=t&&t.getBoundingClientRect?getComputedStyle(t):{};return t&&t.scrollHeight>t.clientHeight&&("auto"===e.overflow||"auto scroll"===e.overflow||"auto"===e.overflowY||"auto scroll"===e.overflowY)?t:t&&t.parentElement?this.recursivelyFindScrollbar(t.parentElement):window}},xa={models:"hands",tags:["browser"],enabled:!1,numFramesFocused:[0,0,0,0],$target:[null,null,null,null],origScrollLeft:[0,0,0,0],origScrollTop:[0,0,0,0],tweenScroll:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],config:{framesToFocus:10,threshold:50,numThresholdErrorFrames:5,speed:1},onFrame({hands:t}){setTimeout(()=>{if(!t.pointer)return;const e=this.handsfree.debug.$canvas.hands.height,i=this.handsfree.debug.$canvas.hands.width;t.pointer.forEach((n,l)=>{var h,c;if(n.isVisible&&!(l>t.origPinch.length)){if("start"===(null===(h=t.pinchState[l])||void 0===h?void 0:h[0])){let g=document.elementFromPoint(n.x,n.y);this.$target[l]=this.getTarget(g),this.tweenScroll[l].x=this.origScrollLeft[l]=this.getTargetScrollLeft(this.$target[l]),this.tweenScroll[l].y=this.origScrollTop[l]=this.getTargetScrollTop(this.$target[l]),this.handsfree.TweenMax.killTweensOf(this.tweenScroll[l])}"held"===(null===(c=t.pinchState[l])||void 0===c?void 0:c[0])&&this.$target[l]&&(this.handsfree.TweenMax.to(this.tweenScroll[l],1,{x:this.tweenScroll[l].x-(t.origPinch[l][0].x-t.curPinch[l][0].x)*i*this.config.speed,y:this.tweenScroll[l].y+(t.origPinch[l][0].y-t.curPinch[l][0].y)*e*this.config.speed,overwrite:!0,ease:"linear.easeNone",immediateRender:!0}),this.$target[l].scrollTo(this.tweenScroll[l].x,this.tweenScroll[l].y))}})})},getTarget(t){const e=t&&t.getBoundingClientRect?getComputedStyle(t):{};return t&&t.scrollHeight>t.clientHeight&&("auto"===e.overflow||"auto scroll"===e.overflow||"auto"===e.overflowY||"auto scroll"===e.overflowY)?t:t&&t.parentElement?this.getTarget(t.parentElement):window},getTargetScrollLeft:t=>t.scrollX||t.scrollLeft||0,getTargetScrollTop:t=>t.scrollY||t.scrollTop||0},Da={models:"hands",enabled:!0,tags:["core"],fingertipIndex:[8,12,16,20],numFramesFocused:[[0,0,0,0],[0,0,0,0]],thresholdMet:[[0,0,0,0],[0,0,0,0]],framesSinceLastGrab:[[0,0,0,0],[0,0,0,0]],origPinch:[[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]],curPinch:[[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]],pinchDowned:[[0,0,0,0],[0,0,0,0]],pinchDown:[[!1,!1,!1,!1],[!1,!1,!1,!1]],pinchUp:[[!1,!1,!1,!1],[!1,!1,!1,!1]],tween:[[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}]],numFramesFocused:[[0,0,0,0],[0,0,0,0]],mouseDowned:0,mouseUp:!1,mouseThresholdMet:!1,config:{framesToFocus:10,threshold:50,numThresholdErrorFrames:5,maxMouseDownedFrames:1},onUse(){this.$target=window},onFrame({hands:t}){if(!t.multiHandLandmarks)return;const e=this.handsfree.debug.$canvas.hands.height,i=t.multiHandedness.some(l=>"Right"===l.label),n=t.multiHandedness.some(l=>"Left"===l.label);for(let l=0;l<t.multiHandLandmarks.length;l++){let h="Right"===t.multiHandedness[l].label?0:1;for(let c=0;c<4;c++){const g=t.multiHandLandmarks[l][4].x-t.multiHandLandmarks[l][this.fingertipIndex[c]].x,E=t.multiHandLandmarks[l][4].y-t.multiHandLandmarks[l][this.fingertipIndex[c]].y,C=Math.sqrt(g*g+E*E)*e;(this.thresholdMet[h][c]=C<this.config.threshold)&&(this.curPinch[h][c]=t.multiHandLandmarks[l][4],this.framesSinceLastGrab[h][c]>this.config.numThresholdErrorFrames&&(this.origPinch[h][c]=t.multiHandLandmarks[l][4],this.handsfree.TweenMax.killTweensOf(this.tween[h][c])),this.framesSinceLastGrab[h][c]=0),++this.framesSinceLastGrab[h][c]}}t.origPinch=this.origPinch,t.curPinch=this.curPinch,this.handsfree.data.hands=this.getPinchStates(t,i,n)},getPinchStates(t,e,i){const n=[e,i];t.pinchState=[["","","",""],["","","",""]];for(let l=0;l<2;l++)for(let h=0;h<4;h++)n[l]&&this.thresholdMet[l][h]?(this.pinchDowned[l][h]++,document.body.classList.add(`handsfree-finger-pinched-${l}-${h}`,`handsfree-finger-pinched-${h}`)):(this.pinchUp[l][h]=this.pinchDowned[l][h],this.pinchDowned[l][h]=0,document.body.classList.remove(`handsfree-finger-pinched-${l}-${h}`,`handsfree-finger-pinched-${h}`)),t.pinchState[l][h]=this.pinchDowned[l][h]>0&&this.pinchDowned[l][h]<=this.config.maxMouseDownedFrames?"start":this.pinchDowned[l][h]>this.config.maxMouseDownedFrames?"held":this.pinchUp[l][h]?"released":"",t.pinchState[l][h]&&(this.handsfree.emit(`finger-pinched-${l}-${h}`,{event:t.pinchState[l][h],origPinch:t.origPinch[l][h],curPinch:t.curPinch[l][h]}),this.handsfree.emit(`finger-pinched-${t.pinchState[l][h]}-${l}-${h}`,{event:t.pinchState[l][h],origPinch:t.origPinch[l][h],curPinch:t.curPinch[l][h]}),this.handsfree.emit(`finger-pinched-${h}`,{event:t.pinchState[l][h],origPinch:t.origPinch[l][h],curPinch:t.curPinch[l][h]}),this.handsfree.emit(`finger-pinched-${t.pinchState[l][h]}-${h}`,{event:t.pinchState[l][h],origPinch:t.origPinch[l][h],curPinch:t.curPinch[l][h]}));return t}};const Ca={start:"mousedown",held:"mousemove",released:"mouseup"};let dt=[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}];var $a={models:"hands",tags:["browser"],enabled:!1,$pointer:[],arePointersVisible:!0,pointer:[{x:-20,y:-20,isVisible:!1},{x:-20,y:-20,isVisible:!1},{x:-20,y:-20,isVisible:!1},{x:-20,y:-20,isVisible:!1}],tween:[{x:-20,y:-20},{x:-20,y:-20},{x:-20,y:-20},{x:-20,y:-20}],config:{offset:{x:0,y:0},speed:{x:1,y:1}},onUse(){for(let t=0;t<4;t++){const e=document.createElement("div");e.classList.add("handsfree-pointer","handsfree-pointer-palm","handsfree-hide-when-started-without-hands"),document.body.appendChild(e),this.$pointer[t]=e}this.enabled&&this.arePointersVisible?this.showPointers():this.hidePointers()},onEnable(){const t=this.arePointersVisible;this.showPointers(),this.arePointersVisible=t},onDisable(){const t=this.arePointersVisible;this.hidePointers(),this.arePointersVisible=t},onFrame({hands:t}){null!=t&&t.multiHandLandmarks?(t.pointer=[{isVisible:!1},{isVisible:!1},{isVisible:!1},{isVisible:!1}],t.multiHandLandmarks.forEach((e,i)=>{var n,l;const h=t.pointer[i];let c;c=i<2?"Right"===t.multiHandedness[i].label?0:1:"Right"===t.multiHandedness[i].label?2:3,this.handsfree.TweenMax.to(this.tween[c],1,{x:window.outerWidth*this.config.speed.x-window.outerWidth*this.config.speed.x/2+window.outerWidth/2-t.multiHandLandmarks[i][21].x*this.config.speed.x*window.outerWidth+this.config.offset.x,y:t.multiHandLandmarks[i][21].y*window.outerHeight*this.config.speed.y-window.outerHeight*this.config.speed.y/2+window.outerHeight/2+this.config.offset.y,overwrite:!0,ease:"linear.easeNone",immediate:!0}),t.pointer[c]={x:this.tween[c].x,y:this.tween[c].y,isVisible:!0},this.$pointer[c].style.left=`${this.tween[c].x}px`,this.$pointer[c].style.top=`${this.tween[c].y}px`;let g=null==h||null===(n=h.pinchState)||void 0===n||null===(l=n[i])||void 0===l?void 0:l[0];if(g&&h.isVisible){g=Ca[g];const E=document.elementFromPoint(h.x,h.y);E&&E.dispatchEvent(new MouseEvent(g,{view:window,button:0,bubbles:!0,cancelable:!0,clientX:h.x,clientY:h.y,movementX:h.x-dt[c].x,movementY:h.y-dt[c].y})),dt[c]=h}}),t.pointer.forEach((e,i)=>{this.$pointer[i].style.display=e.isVisible?"block":"none"})):this.$pointer.forEach(e=>e.style.display="none")},onDisable(){this.$pointer.forEach(t=>{t.classList.add("handsfree-hidden")})},showPointers(){this.arePointersVisible=!0;for(let t=0;t<4;t++)this.$pointer[t].classList.remove("handsfree-hidden")},hidePointers(){this.arePointersVisible=!1;for(let t=0;t<4;t++)this.$pointer[t].classList.add("handsfree-hidden")}};const It={facePointer:Pa,faceClick:Sa,faceScroll:Ea,pinchScroll:xa,pinchers:Da,palmPointers:$a};let Ra=0;return class Oa{constructor(e={}){this.throttle=kt,this.TweenMax=Ta,this.id=++Ra,this.version="8.5.1",this.data={},this.dependencies={loading:[],loaded:[]},this.mediapipeWarmups={isWarmingUp:!1,hands:!1,pose:!1,facemesh:!1},this.plugin={},this.taggedPlugins={untagged:[]},this.gesture={},this.taggedGestures={untagged:[]},this.config=this.cleanConfig(e),this.setupDebugger(),this.prepareModels(),this.loadCorePlugins(),this.hasAddedBodyClass=!1,this.isUpdating=!1,this.numModelsLoaded=0,this.on("modelReady",()=>{let i=0;Object.keys(this.model).forEach(n=>{this.model[n].enabled&&++i}),++this.numModelsLoaded===i&&(document.body.classList.remove("handsfree-loading"),document.body.classList.add("handsfree-started"),this.hasAddedBodyClass=!0,!this.config.isClient&&(!this.isUpdating||this.isUpdating&&this.config.autostart)&&(this.isLooping=!0,this.loop()))}),this.emit("init",this)}prepareModels(){this.model={weboji:{},hands:{},facemesh:{},pose:{},handpose:{}},this.model.weboji=new Bt(this,this.config.weboji),this.model.hands=new Ue(this,this.config.hands),this.model.pose=new Ie(this,this.config.pose),this.model.facemesh=new Ee(this,this.config.facemesh),this.model.handpose=new Vt(this,this.config.handpose)}cleanConfig(e,i){return i||(i=Object.assign({},na)),i.setup.wrap.$parent=document.body,"boolean"==typeof e.weboji&&(e.weboji={enabled:e.weboji}),"boolean"==typeof e.hands&&(e.hands={enabled:e.hands}),"boolean"==typeof e.facemesh&&(e.facemesh={enabled:e.facemesh}),"boolean"==typeof e.pose&&(e.pose={enabled:e.pose}),"boolean"==typeof e.handpose&&(e.handpose={enabled:e.handpose}),e.plugin&&Object.keys(e.plugin).forEach(n=>{"boolean"==typeof e.plugin[n]&&(e.plugin[n]={enabled:e.plugin[n]})}),e.gesture&&Object.keys(e.gesture).forEach(n=>{"boolean"==typeof e.gesture[n]&&(e.gesture[n]={enabled:e.gesture[n]})}),Fe({},i,e)}update(e,i){this.config=this.cleanConfig(e,this.config),this.isUpdating=!0,this.isUsingWebcam=!this.config.setup.video.$el.currentSrc,this.debug.$video=this.config.setup.video.$el,this.debug.$video.width=this.config.setup.video.width,this.debug.$video.height=this.config.setup.video.height,["hands","facemesh","pose","handpose","weboji"].forEach(n=>{let l=this.model[n].enabled;this.config[n]=this.model[n].config=Fe({},this.model[n].config,e[n]),l&&!this.config[n].enabled?this.model[n].disable():!l&&this.config[n].enabled&&this.model[n].enable(!1)}),e.plugin&&Object.keys(e.plugin).forEach(n=>{"boolean"==typeof e.plugin[n].enabled&&(e.plugin[n].enabled?this.plugin[n].enable():this.plugin[n].disable())}),e.gesture&&Object.keys(e.gesture).forEach(n=>{"boolean"==typeof e.gesture[n].enabled&&(e.gesture[n].enabled?this.gesture[n].enable():this.gesture[n].disable())}),!this.config.isClient&&this.config.autostart?this.start(i):i&&i()}start(e){this.config=this.cleanConfig(this.config,this.config),this.isUpdating=!1,document.body.classList.add("handsfree-loading"),this.emit("loading",this),e&&this.on("modelReady",e,{once:!0}),this.numModelsLoaded=0,Object.keys(this.model).forEach(i=>{const n=this.model[i];n.enabled&&!n.dependenciesLoaded?n.loadDependencies():n.enabled&&(this.emit("modelReady",n),this.emit(`${i}ModelReady`,n))}),Object.keys(this.config.plugin).forEach(i=>{var n,l;"boolean"==typeof(null===(n=this.config.plugin)||void 0===n||null===(l=n[i])||void 0===l?void 0:l.enabled)&&this.config.plugin[i].enabled&&this.plugin[i].enable()}),Object.keys(this.config.gesture).forEach(i=>{var n,l;"boolean"==typeof(null===(n=this.config.gesture)||void 0===n||null===(l=n[i])||void 0===l?void 0:l.enabled)&&this.config.gesture[i].enabled&&this.gesture[i].enable()})}stop(){location.reload()}pause(){this.isLooping=!1}unpause(){this.isLooping||(this.isLooping=!0,this.loop())}loop(){var e;Object.keys(this.model).forEach(i=>{const n=this.model[i];n.enabled&&n.dependenciesLoaded&&n.getData()}),this.emit("data",this.data),null===(e=this.taggedPlugins.untagged)||void 0===e||e.forEach(i=>{var n;this.plugin[i].enabled&&(null===(n=this.plugin[i])||void 0===n||n.onFrame(this.data))}),this.isDebugging&&["hands","pose","handpose","facemesh"].find(n=>{if(this.model[n].enabled)return n})&&this.debug.context.video.drawImage(this.debug.$video,0,0,this.debug.$canvas.video.width,this.debug.$canvas.video.height),this.isLooping&&requestAnimationFrame(()=>this.isLooping&&this.loop())}use(e,i){return"function"==typeof i&&(i={onFrame:i}),"string"==typeof(i=Fe({},{name:e,models:[],tags:[],enabled:!0,config:{},onFrame:null,onUse:null,onEnable:null,onDisable:null},i)).models&&(i.models=[i.models]),"string"==typeof i.tags&&(i.tags=[i.tags]),i.tags.forEach(n=>{this.taggedPlugins[n]||(this.taggedPlugins[n]=[]),this.taggedPlugins[n].push(e)}),this.plugin[e]=new ta(i,this),this.plugin[e].onUse&&this.plugin[e].onUse(),i.models.length?i.models.forEach(n=>{this.model[n].plugins.push(e)}):this.taggedPlugins.untagged.push(e),this.plugin[e]}enablePlugins(e){"string"==typeof e&&(e=[e]),e||(e=Object.keys(this.taggedPlugins)),e.forEach(i=>{this.taggedPlugins[i].forEach(n=>{this.plugin[n].enable()})})}disablePlugins(e){"string"==typeof e&&(e=[e]),e||(e=Object.keys(this.taggedPlugins)),e.forEach(i=>{this.taggedPlugins[i].forEach(n=>{this.plugin[n].disable()})})}runPlugins(e){var i;this.data=e,this.config.isClient&&!this.hasAddedBodyClass&&(document.body.classList.add("handsfree-started"),this.hasAddedBodyClass=!0),Object.keys(this.model).forEach(n=>{this.model[n].data=null==e?void 0:e[n],this.model[n].runPlugins()}),null===(i=this.taggedPlugins.untagged)||void 0===i||i.forEach(n=>{var l;this.plugin[n].enabled&&(null===(l=this.plugin[n])||void 0===l||l.onFrame(this.data))})}useGesture(e){return"fingerpose"===("string"==typeof(e=Fe({},{name:"untitled",description:[],models:[],tags:[],enabled:!0},e)).models&&(e.models=[e.models]),"string"==typeof e.tags&&(e.tags=[e.tags]),e.tags.forEach(i=>{this.taggedGestures[i]||(this.taggedGestures[i]=[]),this.taggedGestures[i].push(e.name)}),e.algorithm)&&(this.gesture[e.name]=new sa(e,this)),e.models.length?e.models.forEach(i=>{this.model[i].gestures.push(e.name),this.model[i].updateGestureEstimator()}):this.taggedGestures.untagged.push(e.name),this.gesture[e.name]}enableGestures(e){"string"==typeof e&&(e=[e]),e||(e=Object.keys(this.taggedGestures)),e.forEach(i=>{this.taggedGestures[i].forEach(n=>{this.gesture[n].enable()})})}disableGestures(e){"string"==typeof e&&(e=[e]),e||(e=Object.keys(this.taggedGestures)),e.forEach(i=>{this.taggedGestures[i].forEach(n=>{this.gesture[n].disable()})})}emit(e,i=null){const n=new CustomEvent(`handsfree-${e}`,{detail:i});document.dispatchEvent(n)}on(e,i,n){document.addEventListener(`handsfree-${e}`,l=>{i(l.detail)},n)}normalize(e,i,n=0){return(e-n)/(i-n)}getUserMedia(e){var i,n;this.debug.stream||this.debug.isGettingStream?!this.debug.stream&&this.debug.isGettingStream?e&&this.on("gotUserMedia",e):(this.debug.$video.play(),this.emit("gotUserMedia",this.debug.stream),e&&e()):this.isUsingWebcam&&null!==(i=this.model.weboji)&&void 0!==i&&null!==(n=i.api)&&void 0!==n&&n.get_videoStream?(this.debug.$video=this.model.weboji.api.get_video(),this.debug.$video.srcObject=this.debug.stream=this.model.weboji.api.get_videoStream(),this.emit("gotUserMedia",this.debug.stream),e&&e()):this.isUsingWebcam?(this.debug.isGettingStream=!0,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:this.debug.$video.width,height:this.debug.$video.height}}).then(l=>{this.debug.$video.srcObject=this.debug.stream=l,this.debug.$video.onloadedmetadata=()=>{this.debug.$video.play(),this.emit("gotUserMedia",l),e&&e()}}).catch(l=>{console.error(`Error getting user media: ${l}`)}).finally(()=>{this.debug.isGettingStream=!1})):(this.debug.stream=this.debug.$video.srcObject,this.debug.$video.play(),this.emit("gotUserMedia",this.debug.stream),e&&e(),this.debug.isGettingStream=!1)}loadCorePlugins(){Object.keys(It).forEach(e=>{this.use(e,It[e])})}setupDebugger(){if(this.debug={},!this.config.setup.wrap.$el){const e=document.createElement("DIV");e.classList.add("handsfree-debugger"),this.config.setup.wrap.$el=e}if(this.debug.$wrap=this.config.setup.wrap.$el,this.config.setup.video.$el)this.debug.$video=this.config.setup.video.$el,this.isUsingWebcam=!1;else{const e=document.createElement("VIDEO");e.setAttribute("playsinline",!0),e.classList.add("handsfree-video"),e.setAttribute("id",`handsfree-video-${this.id}`),this.config.setup.video.$el=e,this.isUsingWebcam=!0,this.debug.$video=this.config.setup.video.$el,this.debug.$wrap.appendChild(this.debug.$video)}this.debug.$video.width=this.config.setup.video.width,this.debug.$video.height=this.config.setup.video.height,this.debug.$canvas={},this.debug.context={},this.config.setup.canvas.video={width:this.debug.$video.width,height:this.debug.$video.height},["video","weboji","facemesh","pose","hands","handpose"].forEach(e=>{this.debug.$canvas[e]={},this.debug.context[e]={};let i=this.config.setup.canvas[e].$el;i||(i=document.createElement("CANVAS"),this.config.setup.canvas[e].$el=i),i.classList.add("handsfree-canvas",`handsfree-canvas-${e}`,`handsfree-hide-when-started-without-${e}`),i.setAttribute("id",`handsfree-canvas-${e}-${this.id}`),this.debug.$canvas[e]=this.config.setup.canvas[e].$el,this.debug.$canvas[e].width=this.config.setup.canvas[e].width,this.debug.$canvas[e].height=this.config.setup.canvas[e].height,this.debug.$wrap.appendChild(this.debug.$canvas[e]),["weboji","handpose"].includes(e)?this.debug.$canvas[e].classList.add("handsfree-canvas-webgl"):this.debug.context[e]=this.debug.$canvas[e].getContext("2d")}),this.config.setup.wrap.$parent.appendChild(this.debug.$wrap),this.config.showDebug?this.showDebugger():this.hideDebugger()}showDebugger(){this.isDebugging=!0,document.body.classList.add("handsfree-show-debug"),document.body.classList.remove("handsfree-hide-debug")}hideDebugger(){this.isDebugging=!1,document.body.classList.remove("handsfree-show-debug"),document.body.classList.add("handsfree-hide-debug")}}});